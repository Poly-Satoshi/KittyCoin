<!doctype html><html translate="no"><head><script>
//<![CDATA[
(function(){var __webpack_modules__={99845:function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.EVENTS=void 0,r.EVENTS={REQUEST_CHILD_ETHEREUM_ACCOUNTS_START:"walletlink_sdk.request_child_ethereum_accounts.start",REQUEST_CHILD_ETHEREUM_ACCOUNTS_RESPONSE:"walletlink_sdk.request_child_ethereum_accounts.response",STARTED_CONNECTING:"walletlink_sdk.started.connecting",CONNECTED_STATE_CHANGE:"walletlink_sdk.connected",DISCONNECTED:"walletlink_sdk.disconnected",METADATA_DESTROYED:"walletlink_sdk_metadata_destroyed",LINKED:"walletlink_sdk.linked",FAILURE:"walletlink_sdk.generic_failure",SESSION_CONFIG_RECEIVED:"walletlink_sdk.session_config_event_received",ETH_ACCOUNTS_STATE:"walletlink_sdk.eth_accounts_state",SESSION_STATE_CHANGE:"walletlink_sdk.session_state_change",UNLINKED_ERROR_STATE:"walletlink_sdk.unlinked_error_state",SKIPPED_CLEARING_SESSION:"walletlink_sdk.skipped_clearing_session",GENERAL_ERROR:"walletlink_sdk.general_error",WEB3_REQUEST:"walletlink_sdk.web3.request",WEB3_REQUEST_PUBLISHED:"walletlink_sdk.web3.request_published",WEB3_RESPONSE:"walletlink_sdk.web3.response",UNKNOWN_ADDRESS_ENCOUNTERED:"walletlink_sdk.unknown_address_encountered"}},51182:function(t,r){"use strict";function _defineProperties(t,r){for(var i=0;i<r.length;i++){var o=r[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}Object.defineProperty(r,"__esModule",{value:!0}),r.ScopedLocalStorage=void 0;var i=function(){function ScopedLocalStorage(t){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,ScopedLocalStorage),this.scope=t}return function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(ScopedLocalStorage,[{key:"setItem",value:function setItem(t,r){localStorage.setItem(this.scopedKey(t),r)}},{key:"getItem",value:function getItem(t){return localStorage.getItem(this.scopedKey(t))}},{key:"removeItem",value:function removeItem(t){localStorage.removeItem(this.scopedKey(t))}},{key:"clear",value:function clear(){for(var t=this.scopedKey(""),r=[],i=0;i<localStorage.length;i++){var o=localStorage.key(i);"string"==typeof o&&o.startsWith(t)&&r.push(o)}r.forEach((function(t){return localStorage.removeItem(t)}))}},{key:"scopedKey",value:function scopedKey(t){return"".concat(this.scope,":").concat(t)}}]),ScopedLocalStorage}();r.ScopedLocalStorage=i},50101:function(t,r,i){"use strict";var o=i(29033).Buffer;function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,o=new Array(r);i<r;i++)o[i]=t[i];return o}function asyncGeneratorStep(t,r,i,o,a,u,c){try{var l=t[u](c),h=l.value}catch(p){return void i(p)}l.done?r(h):Promise.resolve(h).then(o,a)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(o,a){var u=t.apply(r,i);function _next(t){asyncGeneratorStep(u,o,a,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(u,o,a,_next,_throw,"throw",t)}_next(void 0)}))}}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var o=r[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t},_setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(t,r){if(r&&("object"==typeof r||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(t)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}var a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0}),r.CoinbaseWalletProvider=void 0;var u=a(i(25917)),c=a(i(31734)),l=i(36051),h=i(99845),p=i(61537),d=i(12067),y=i(89591),b=a(i(26131)),v=i(56298),g=i(11695),m=i(76937),_="DefaultChainId",w="DefaultJsonRpcUrl",S="HasChainBeenSwitched",x="HasChainOverriddenFromRelay",O=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&_setPrototypeOf(t,r)}(CoinbaseWalletProvider,t);var r,i,a,u,O,R,T,k,A,P,M,I,B,C,N,j,L,D,W,U,H,q,z,V,G=_createSuper(CoinbaseWalletProvider);function CoinbaseWalletProvider(t){var r,i,o;!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,CoinbaseWalletProvider),(r=G.call(this))._filterPolyfill=new v.FilterPolyfill(_assertThisInitialized(r)),r._subscriptionManager=new m.SubscriptionManager(_assertThisInitialized(r)),r._relay=null,r._addresses=[],r.hasMadeFirstChainChangedEmission=!1,r._send=r.send.bind(_assertThisInitialized(r)),r._sendAsync=r.sendAsync.bind(_assertThisInitialized(r)),r.setProviderInfo=r.setProviderInfo.bind(_assertThisInitialized(r)),r.updateProviderInfo=r.updateProviderInfo.bind(_assertThisInitialized(r)),r.getChainId=r.getChainId.bind(_assertThisInitialized(r)),r.setAppInfo=r.setAppInfo.bind(_assertThisInitialized(r)),r.enable=r.enable.bind(_assertThisInitialized(r)),r.close=r.close.bind(_assertThisInitialized(r)),r.send=r.send.bind(_assertThisInitialized(r)),r.sendAsync=r.sendAsync.bind(_assertThisInitialized(r)),r.request=r.request.bind(_assertThisInitialized(r)),r._setAddresses=r._setAddresses.bind(_assertThisInitialized(r)),r.scanQRCode=r.scanQRCode.bind(_assertThisInitialized(r)),r.genericRequest=r.genericRequest.bind(_assertThisInitialized(r)),r._jsonRpcUrlFromOpts=t.jsonRpcUrl,r._overrideIsMetaMask=t.overrideIsMetaMask,r._relayProvider=t.relayProvider,r._storage=t.storage,r._relayEventManager=t.relayEventManager,r._eventListener=t.eventListener,r.isCoinbaseWallet=null===(i=t.overrideIsCoinbaseWallet)||void 0===i||i,r.isCoinbaseBrowser=null!==(o=t.overrideIsCoinbaseBrowser)&&void 0!==o&&o,r.qrUrl=t.qrUrl,r.supportsAddressSwitching=t.supportsAddressSwitching;var a=r.getChainId(),u=(0,y.prepend0x)(a.toString(16));r.emit("connect",{chainIdStr:u});var c=r._storage.getItem(d.LOCAL_STORAGE_ADDRESSES_KEY);if(c){var l=c.split(" ");""!==l[0]&&(r._addresses=l.map((function(t){return(0,y.ensureAddressString)(t)})),r.emit("accountsChanged",l))}return r._subscriptionManager.events.on("notification",(function(t){r.emit("message",{type:t.method,data:t.params})})),r._addresses.length>0&&r.initializeRelay(),window.addEventListener("message",(function(t){var i;if("walletLinkMessage"===t.data.type&&"defaultChainChanged"===t.data.data.action){var o=t.data.data.chainId,a=null!==(i=t.data.data.jsonRpcUrl)&&void 0!==i?i:r.jsonRpcUrl;r.updateProviderInfo(a,Number(o),!0)}})),r}return function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(CoinbaseWalletProvider,[{key:"selectedAddress",get:function get(){return this._addresses[0]||void 0}},{key:"networkVersion",get:function get(){return this.getChainId().toString(10)}},{key:"chainId",get:function get(){return(0,y.prepend0x)(this.getChainId().toString(16))}},{key:"isWalletLink",get:function get(){return!0}},{key:"isMetaMask",get:function get(){return this._overrideIsMetaMask}},{key:"host",get:function get(){return this.jsonRpcUrl}},{key:"connected",get:function get(){return!0}},{key:"isConnected",value:function isConnected(){return!0}},{key:"jsonRpcUrl",get:function get(){var t;return null!==(t=this._storage.getItem(w))&&void 0!==t?t:this._jsonRpcUrlFromOpts},set:function set(t){this._storage.setItem(w,t)}},{key:"isChainOverridden",get:function get(){return"true"===this._storage.getItem(x)},set:function set(t){this._storage.setItem(x,t.toString())}},{key:"setProviderInfo",value:function setProviderInfo(t,r){this.isChainOverridden||this.updateProviderInfo(t,this.getChainId(),!1)}},{key:"updateProviderInfo",value:function updateProviderInfo(t,r,i){if(!("true"===this._storage.getItem(S))||!i){i&&(this.isChainOverridden=!0),this.jsonRpcUrl=t;var o=this.getChainId();this._storage.setItem(_,r.toString(10)),!((0,y.ensureIntNumber)(r)!==o)&&this.hasMadeFirstChainChangedEmission||(this.emit("chainChanged",this.getChainId()),this.hasMadeFirstChainChangedEmission=!0)}}},{key:"watchAsset",value:(V=_asyncToGenerator(regeneratorRuntime.mark((function _callee(t,r,i,o,a,u){var c,l;return regeneratorRuntime.wrap((function _callee$(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,this.initializeRelay();case 2:return c=h.sent,h.next=5,c.watchAsset(t,r,i,o,a,null==u?void 0:u.toString()).promise;case 5:return l=h.sent,h.abrupt("return",!!l.result);case 7:case"end":return h.stop()}}),_callee,this)}))),function watchAsset(t,r,i,o,a,u){return V.apply(this,arguments)})},{key:"addEthereumChain",value:(z=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(t,r,i,o,a,u){var c,l,h,p,d;return regeneratorRuntime.wrap((function _callee2$(b){for(;;)switch(b.prev=b.next){case 0:if((0,y.ensureIntNumber)(t)!==this.getChainId()){b.next=2;break}return b.abrupt("return",!1);case 2:return b.next=4,this.initializeRelay();case 4:if(h=b.sent,p=h.inlineAddEthereumChain(t.toString()),this._isAuthorized()||p){b.next=9;break}return b.next=9,h.requestEthereumAccounts().promise;case 9:return b.next=11,h.addEthereumChain(t.toString(),r,a,i,o,u).promise;case 11:return d=b.sent,!0===(null===(c=d.result)||void 0===c?void 0:c.isApproved)&&(this._storage.setItem(S,"true"),this.updateProviderInfo(r[0],t,!1)),b.abrupt("return",!0===(null===(l=d.result)||void 0===l?void 0:l.isApproved));case 14:case"end":return b.stop()}}),_callee2,this)}))),function addEthereumChain(t,r,i,o,a,u){return z.apply(this,arguments)})},{key:"switchEthereumChain",value:(q=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(t){var r,i,o;return regeneratorRuntime.wrap((function _callee3$(a){for(;;)switch(a.prev=a.next){case 0:if((0,y.ensureIntNumber)(t)!==this.getChainId()){a.next=2;break}return a.abrupt("return");case 2:return a.next=4,this.initializeRelay();case 4:return r=a.sent,a.next=7,r.switchEthereumChain(t.toString(10)).promise;case 7:if(!(i=a.sent).errorCode){a.next=10;break}throw l.ethErrors.provider.custom({code:i.errorCode});case 10:(o=i.result).isApproved&&o.rpcUrl.length>0&&(this._storage.setItem(S,"true"),this.updateProviderInfo(o.rpcUrl,t,!1));case 12:case"end":return a.stop()}}),_callee3,this)}))),function switchEthereumChain(t){return q.apply(this,arguments)})},{key:"setAppInfo",value:function setAppInfo(t,r){this.initializeRelay().then((function(i){return i.setAppInfo(t,r)}))}},{key:"enable",value:(H=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(){var t;return regeneratorRuntime.wrap((function _callee4$(r){for(;;)switch(r.prev=r.next){case 0:if(null===(t=this._eventListener)||void 0===t||t.onEvent(h.EVENTS.ETH_ACCOUNTS_STATE,{method:"provider::enable",addresses_length:this._addresses.length,sessionIdHash:this._relay?p.Session.hash(this._relay.session.id):null}),!(this._addresses.length>0)){r.next=3;break}return r.abrupt("return",_toConsumableArray(this._addresses));case 3:return r.next=5,this._send(g.JSONRPCMethod.eth_requestAccounts);case 5:return r.abrupt("return",r.sent);case 6:case"end":return r.stop()}}),_callee4,this)}))),function enable(){return H.apply(this,arguments)})},{key:"close",value:function close(){this.initializeRelay().then((function(t){return t.resetAndReload()}))}},{key:"send",value:function send(t,r){var i=this;if("string"==typeof t){var o={jsonrpc:"2.0",id:0,method:t,params:Array.isArray(r)?r:void 0!==r?[r]:[]};return this._sendRequestAsync(o).then((function(t){return t.result}))}if("function"==typeof r){var a=t,u=r;return this._sendAsync(a,u)}if(Array.isArray(t))return t.map((function(t){return i._sendRequest(t)}));var c=t;return this._sendRequest(c)}},{key:"sendAsync",value:function sendAsync(t,r){if("function"!=typeof r)throw new Error("callback is required");if(Array.isArray(t)){var i=r;this._sendMultipleRequestsAsync(t).then((function(t){return i(null,t)})).catch((function(t){return i(t,null)}))}else{var o=r;this._sendRequestAsync(t).then((function(t){return o(null,t)})).catch((function(t){return o(t,null)}))}}},{key:"request",value:(U=_asyncToGenerator(regeneratorRuntime.mark((function _callee5(t){var r,i,o,a,u;return regeneratorRuntime.wrap((function _callee5$(c){for(;;)switch(c.prev=c.next){case 0:if(t&&"object"==typeof t&&!Array.isArray(t)){c.next=2;break}throw l.ethErrors.rpc.invalidRequest({message:"Expected a single, non-array, object argument.",data:t});case 2:if(r=t.method,i=t.params,"string"==typeof r&&0!==r.length){c.next=5;break}throw l.ethErrors.rpc.invalidRequest({message:"'args.method' must be a non-empty string.",data:t});case 5:if(void 0===i||Array.isArray(i)||"object"==typeof i&&null!==i){c.next=7;break}throw l.ethErrors.rpc.invalidRequest({message:"'args.params' must be an object or array if provided.",data:t});case 7:return o=void 0===i?[]:i,a=this._relayEventManager.makeRequestId(),c.next=11,this._sendRequestAsync({method:r,params:o,jsonrpc:"2.0",id:a});case 11:return u=c.sent,c.abrupt("return",u.result);case 13:case"end":return c.stop()}}),_callee5,this)}))),function request(t){return U.apply(this,arguments)})},{key:"scanQRCode",value:(W=_asyncToGenerator(regeneratorRuntime.mark((function _callee6(t){var r,i;return regeneratorRuntime.wrap((function _callee6$(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,this.initializeRelay();case 2:return r=o.sent,o.next=5,r.scanQRCode((0,y.ensureRegExpString)(t)).promise;case 5:if("string"==typeof(i=o.sent).result){o.next=8;break}throw new Error("result was not a string");case 8:return o.abrupt("return",i.result);case 9:case"end":return o.stop()}}),_callee6,this)}))),function scanQRCode(t){return W.apply(this,arguments)})},{key:"genericRequest",value:(D=_asyncToGenerator(regeneratorRuntime.mark((function _callee7(t,r){var i,o;return regeneratorRuntime.wrap((function _callee7$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.initializeRelay();case 2:return i=a.sent,a.next=5,i.genericRequest(t,r).promise;case 5:if("string"==typeof(o=a.sent).result){a.next=8;break}throw new Error("result was not a string");case 8:return a.abrupt("return",o.result);case 9:case"end":return a.stop()}}),_callee7,this)}))),function genericRequest(t,r){return D.apply(this,arguments)})},{key:"supportsSubscriptions",value:function supportsSubscriptions(){return!1}},{key:"subscribe",value:function subscribe(){throw new Error("Subscriptions are not supported")}},{key:"unsubscribe",value:function unsubscribe(){throw new Error("Subscriptions are not supported")}},{key:"disconnect",value:function disconnect(){return!0}},{key:"_sendRequest",value:function _sendRequest(t){var r={jsonrpc:"2.0",id:t.id},i=t.method;if(r.result=this._handleSynchronousMethods(t),void 0===r.result)throw new Error("Coinbase Wallet does not support calling ".concat(i," synchronously without ")+"a callback. Please provide a callback parameter to call ".concat(i," ")+"asynchronously.");return r}},{key:"_setAddresses",value:function _setAddresses(t){if(!Array.isArray(t))throw new Error("addresses is not an array");var r=t.map((function(t){return(0,y.ensureAddressString)(t)}));JSON.stringify(r)!==JSON.stringify(this._addresses)&&(this._addresses.length>0&&!1===this.supportsAddressSwitching||(this._addresses=r,this.emit("accountsChanged",this._addresses),this._storage.setItem(d.LOCAL_STORAGE_ADDRESSES_KEY,r.join(" "))))}},{key:"_sendRequestAsync",value:function _sendRequestAsync(t){var r=this;return new Promise((function(i,o){try{var a=r._handleSynchronousMethods(t);if(void 0!==a)return i({jsonrpc:"2.0",id:t.id,result:a});var u=r._handleAsynchronousFilterMethods(t);if(void 0!==u)return void u.then((function(r){return i(Object.assign(Object.assign({},r),{id:t.id}))})).catch((function(t){return o(t)}));var c=r._handleSubscriptionMethods(t);if(void 0!==c)return void c.then((function(r){return i({jsonrpc:"2.0",id:t.id,result:r.result})})).catch((function(t){return o(t)}))}catch(l){return o(l)}r._handleAsynchronousMethods(t).then((function(r){return r&&i(Object.assign(Object.assign({},r),{id:t.id}))})).catch((function(t){return o(t)}))}))}},{key:"_sendMultipleRequestsAsync",value:function _sendMultipleRequestsAsync(t){var r=this;return Promise.all(t.map((function(t){return r._sendRequestAsync(t)})))}},{key:"_handleSynchronousMethods",value:function _handleSynchronousMethods(t){var r=t.method,i=t.params||[];switch(r){case g.JSONRPCMethod.eth_accounts:return this._eth_accounts();case g.JSONRPCMethod.eth_coinbase:return this._eth_coinbase();case g.JSONRPCMethod.eth_uninstallFilter:return this._eth_uninstallFilter(i);case g.JSONRPCMethod.net_version:return this._net_version();case g.JSONRPCMethod.eth_chainId:return this._eth_chainId();default:return}}},{key:"_handleAsynchronousMethods",value:(L=_asyncToGenerator(regeneratorRuntime.mark((function _callee8(t){var r,i,o;return regeneratorRuntime.wrap((function _callee8$(a){for(;;)switch(a.prev=a.next){case 0:r=t.method,i=t.params||[],a.t0=r,a.next=a.t0===g.JSONRPCMethod.eth_requestAccounts?5:a.t0===g.JSONRPCMethod.eth_sign?6:a.t0===g.JSONRPCMethod.eth_ecRecover?7:a.t0===g.JSONRPCMethod.personal_sign?8:a.t0===g.JSONRPCMethod.personal_ecRecover?9:a.t0===g.JSONRPCMethod.eth_signTransaction?10:a.t0===g.JSONRPCMethod.eth_sendRawTransaction?11:a.t0===g.JSONRPCMethod.eth_sendTransaction?12:a.t0===g.JSONRPCMethod.eth_signTypedData_v1?13:a.t0===g.JSONRPCMethod.eth_signTypedData_v2?14:a.t0===g.JSONRPCMethod.eth_signTypedData_v3?15:a.t0===g.JSONRPCMethod.eth_signTypedData_v4||a.t0===g.JSONRPCMethod.eth_signTypedData?16:a.t0===g.JSONRPCMethod.cbWallet_arbitrary?17:a.t0===g.JSONRPCMethod.wallet_addEthereumChain?18:a.t0===g.JSONRPCMethod.wallet_switchEthereumChain?19:a.t0===g.JSONRPCMethod.wallet_watchAsset?20:21;break;case 5:return a.abrupt("return",this._eth_requestAccounts());case 6:return a.abrupt("return",this._eth_sign(i));case 7:return a.abrupt("return",this._eth_ecRecover(i));case 8:return a.abrupt("return",this._personal_sign(i));case 9:return a.abrupt("return",this._personal_ecRecover(i));case 10:return a.abrupt("return",this._eth_signTransaction(i));case 11:return a.abrupt("return",this._eth_sendRawTransaction(i));case 12:return a.abrupt("return",this._eth_sendTransaction(i));case 13:return a.abrupt("return",this._eth_signTypedData_v1(i));case 14:return a.abrupt("return",this._throwUnsupportedMethodError());case 15:return a.abrupt("return",this._eth_signTypedData_v3(i));case 16:return a.abrupt("return",this._eth_signTypedData_v4(i));case 17:return a.abrupt("return",this._cbwallet_arbitrary(i));case 18:return a.abrupt("return",this._wallet_addEthereumChain(i));case 19:return a.abrupt("return",this._wallet_switchEthereumChain(i));case 20:return a.abrupt("return",this._wallet_watchAsset(i));case 21:return a.next=23,this.initializeRelay();case 23:return o=a.sent,a.abrupt("return",o.makeEthereumJSONRPCRequest(t,this.jsonRpcUrl));case 25:case"end":return a.stop()}}),_callee8,this)}))),function _handleAsynchronousMethods(t){return L.apply(this,arguments)})},{key:"_handleAsynchronousFilterMethods",value:function _handleAsynchronousFilterMethods(t){var r=t.method,i=t.params||[];switch(r){case g.JSONRPCMethod.eth_newFilter:return this._eth_newFilter(i);case g.JSONRPCMethod.eth_newBlockFilter:return this._eth_newBlockFilter();case g.JSONRPCMethod.eth_newPendingTransactionFilter:return this._eth_newPendingTransactionFilter();case g.JSONRPCMethod.eth_getFilterChanges:return this._eth_getFilterChanges(i);case g.JSONRPCMethod.eth_getFilterLogs:return this._eth_getFilterLogs(i)}}},{key:"_handleSubscriptionMethods",value:function _handleSubscriptionMethods(t){switch(t.method){case g.JSONRPCMethod.eth_subscribe:case g.JSONRPCMethod.eth_unsubscribe:return this._subscriptionManager.handleRequest(t)}}},{key:"_isKnownAddress",value:function _isKnownAddress(t){try{var r=(0,y.ensureAddressString)(t);return this._addresses.map((function(t){return(0,y.ensureAddressString)(t)})).includes(r)}catch(i){}return!1}},{key:"_ensureKnownAddress",value:function _ensureKnownAddress(t){var r;if(!this._isKnownAddress(t))throw null===(r=this._eventListener)||void 0===r||r.onEvent(h.EVENTS.UNKNOWN_ADDRESS_ENCOUNTERED),new Error("Unknown Ethereum address")}},{key:"_prepareTransactionParams",value:function _prepareTransactionParams(t){var r=t.from?(0,y.ensureAddressString)(t.from):this.selectedAddress;if(!r)throw new Error("Ethereum address is unavailable");return this._ensureKnownAddress(r),{fromAddress:r,toAddress:t.to?(0,y.ensureAddressString)(t.to):null,weiValue:null!=t.value?(0,y.ensureBN)(t.value):new c.default(0),data:t.data?(0,y.ensureBuffer)(t.data):o.alloc(0),nonce:null!=t.nonce?(0,y.ensureIntNumber)(t.nonce):null,gasPriceInWei:null!=t.gasPrice?(0,y.ensureBN)(t.gasPrice):null,maxFeePerGas:null!=t.maxFeePerGas?(0,y.ensureBN)(t.maxFeePerGas):null,maxPriorityFeePerGas:null!=t.maxPriorityFeePerGas?(0,y.ensureBN)(t.maxPriorityFeePerGas):null,gasLimit:null!=t.gas?(0,y.ensureBN)(t.gas):null,chainId:this.getChainId()}}},{key:"_isAuthorized",value:function _isAuthorized(){return this._addresses.length>0}},{key:"_requireAuthorization",value:function _requireAuthorization(){if(!this._isAuthorized())throw l.ethErrors.provider.unauthorized({})}},{key:"_throwUnsupportedMethodError",value:function _throwUnsupportedMethodError(){throw l.ethErrors.provider.unsupportedMethod({})}},{key:"_signEthereumMessage",value:(j=_asyncToGenerator(regeneratorRuntime.mark((function _callee9(t,r,i,o){var a,u;return regeneratorRuntime.wrap((function _callee9$(c){for(;;)switch(c.prev=c.next){case 0:return this._ensureKnownAddress(r),c.prev=1,c.next=4,this.initializeRelay();case 4:return a=c.sent,c.next=7,a.signEthereumMessage(t,r,i,o).promise;case 7:return u=c.sent,c.abrupt("return",{jsonrpc:"2.0",id:0,result:u.result});case 11:if(c.prev=11,c.t0=c.catch(1),"string"!=typeof c.t0.message||!c.t0.message.match(/(denied|rejected)/i)){c.next=15;break}throw l.ethErrors.provider.userRejectedRequest("User denied message signature");case 15:throw c.t0;case 16:case"end":return c.stop()}}),_callee9,this,[[1,11]])}))),function _signEthereumMessage(t,r,i,o){return j.apply(this,arguments)})},{key:"_ethereumAddressFromSignedMessage",value:(N=_asyncToGenerator(regeneratorRuntime.mark((function _callee10(t,r,i){var o,a;return regeneratorRuntime.wrap((function _callee10$(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.initializeRelay();case 2:return o=u.sent,u.next=5,o.ethereumAddressFromSignedMessage(t,r,i).promise;case 5:return a=u.sent,u.abrupt("return",{jsonrpc:"2.0",id:0,result:a.result});case 7:case"end":return u.stop()}}),_callee10,this)}))),function _ethereumAddressFromSignedMessage(t,r,i){return N.apply(this,arguments)})},{key:"_eth_accounts",value:function _eth_accounts(){return _toConsumableArray(this._addresses)}},{key:"_eth_coinbase",value:function _eth_coinbase(){return this.selectedAddress||null}},{key:"_net_version",value:function _net_version(){return this.getChainId().toString(10)}},{key:"_eth_chainId",value:function _eth_chainId(){return(0,y.hexStringFromIntNumber)(this.getChainId())}},{key:"getChainId",value:function getChainId(){var t=this._storage.getItem(_)||"1",r=parseInt(t,10);return(0,y.ensureIntNumber)(r)}},{key:"_eth_requestAccounts",value:(C=_asyncToGenerator(regeneratorRuntime.mark((function _callee11(){var t,r,i;return regeneratorRuntime.wrap((function _callee11$(o){for(;;)switch(o.prev=o.next){case 0:if(null===(t=this._eventListener)||void 0===t||t.onEvent(h.EVENTS.ETH_ACCOUNTS_STATE,{method:"provider::_eth_requestAccounts",addresses_length:this._addresses.length,sessionIdHash:this._relay?p.Session.hash(this._relay.session.id):null}),!(this._addresses.length>0)){o.next=3;break}return o.abrupt("return",Promise.resolve({jsonrpc:"2.0",id:0,result:this._addresses}));case 3:return o.prev=3,o.next=6,this.initializeRelay();case 6:return i=o.sent,o.next=9,i.requestEthereumAccounts().promise;case 9:r=o.sent,o.next=17;break;case 12:if(o.prev=12,o.t0=o.catch(3),"string"!=typeof o.t0.message||!o.t0.message.match(/(denied|rejected)/i)){o.next=16;break}throw l.ethErrors.provider.userRejectedRequest("User denied account authorization");case 16:throw o.t0;case 17:if(r.result){o.next=19;break}throw new Error("accounts received is empty");case 19:return this._setAddresses(r.result),o.abrupt("return",{jsonrpc:"2.0",id:0,result:this._addresses});case 21:case"end":return o.stop()}}),_callee11,this,[[3,12]])}))),function _eth_requestAccounts(){return C.apply(this,arguments)})},{key:"_eth_sign",value:function _eth_sign(t){this._requireAuthorization();var r=(0,y.ensureAddressString)(t[0]),i=(0,y.ensureBuffer)(t[1]);return this._signEthereumMessage(i,r,!1)}},{key:"_eth_ecRecover",value:function _eth_ecRecover(t){var r=(0,y.ensureBuffer)(t[0]),i=(0,y.ensureBuffer)(t[1]);return this._ethereumAddressFromSignedMessage(r,i,!1)}},{key:"_personal_sign",value:function _personal_sign(t){this._requireAuthorization();var r=(0,y.ensureBuffer)(t[0]),i=(0,y.ensureAddressString)(t[1]);return this._signEthereumMessage(r,i,!0)}},{key:"_personal_ecRecover",value:function _personal_ecRecover(t){var r=(0,y.ensureBuffer)(t[0]),i=(0,y.ensureBuffer)(t[1]);return this._ethereumAddressFromSignedMessage(r,i,!0)}},{key:"_eth_signTransaction",value:(B=_asyncToGenerator(regeneratorRuntime.mark((function _callee12(t){var r,i,o;return regeneratorRuntime.wrap((function _callee12$(a){for(;;)switch(a.prev=a.next){case 0:return this._requireAuthorization(),r=this._prepareTransactionParams(t[0]||{}),a.prev=2,a.next=5,this.initializeRelay();case 5:return i=a.sent,a.next=8,i.signEthereumTransaction(r).promise;case 8:return o=a.sent,a.abrupt("return",{jsonrpc:"2.0",id:0,result:o.result});case 12:if(a.prev=12,a.t0=a.catch(2),"string"!=typeof a.t0.message||!a.t0.message.match(/(denied|rejected)/i)){a.next=16;break}throw l.ethErrors.provider.userRejectedRequest("User denied transaction signature");case 16:throw a.t0;case 17:case"end":return a.stop()}}),_callee12,this,[[2,12]])}))),function _eth_signTransaction(t){return B.apply(this,arguments)})},{key:"_eth_sendRawTransaction",value:(I=_asyncToGenerator(regeneratorRuntime.mark((function _callee13(t){var r,i,o;return regeneratorRuntime.wrap((function _callee13$(a){for(;;)switch(a.prev=a.next){case 0:return r=(0,y.ensureBuffer)(t[0]),a.next=3,this.initializeRelay();case 3:return i=a.sent,a.next=6,i.submitEthereumTransaction(r,this.getChainId()).promise;case 6:return o=a.sent,a.abrupt("return",{jsonrpc:"2.0",id:0,result:o.result});case 8:case"end":return a.stop()}}),_callee13,this)}))),function _eth_sendRawTransaction(t){return I.apply(this,arguments)})},{key:"_eth_sendTransaction",value:(M=_asyncToGenerator(regeneratorRuntime.mark((function _callee14(t){var r,i,o;return regeneratorRuntime.wrap((function _callee14$(a){for(;;)switch(a.prev=a.next){case 0:return this._requireAuthorization(),r=this._prepareTransactionParams(t[0]||{}),a.prev=2,a.next=5,this.initializeRelay();case 5:return i=a.sent,a.next=8,i.signAndSubmitEthereumTransaction(r).promise;case 8:return o=a.sent,a.abrupt("return",{jsonrpc:"2.0",id:0,result:o.result});case 12:if(a.prev=12,a.t0=a.catch(2),"string"!=typeof a.t0.message||!a.t0.message.match(/(denied|rejected)/i)){a.next=16;break}throw l.ethErrors.provider.userRejectedRequest("User denied transaction signature");case 16:throw a.t0;case 17:case"end":return a.stop()}}),_callee14,this,[[2,12]])}))),function _eth_sendTransaction(t){return M.apply(this,arguments)})},{key:"_eth_signTypedData_v1",value:(P=_asyncToGenerator(regeneratorRuntime.mark((function _callee15(t){var r,i,o,a;return regeneratorRuntime.wrap((function _callee15$(u){for(;;)switch(u.prev=u.next){case 0:return this._requireAuthorization(),r=(0,y.ensureParsedJSONObject)(t[0]),i=(0,y.ensureAddressString)(t[1]),this._ensureKnownAddress(i),o=b.default.hashForSignTypedDataLegacy({data:r}),a=JSON.stringify(r,null,2),u.abrupt("return",this._signEthereumMessage(o,i,!1,a));case 7:case"end":return u.stop()}}),_callee15,this)}))),function _eth_signTypedData_v1(t){return P.apply(this,arguments)})},{key:"_eth_signTypedData_v3",value:(A=_asyncToGenerator(regeneratorRuntime.mark((function _callee16(t){var r,i,o,a;return regeneratorRuntime.wrap((function _callee16$(u){for(;;)switch(u.prev=u.next){case 0:return this._requireAuthorization(),r=(0,y.ensureAddressString)(t[0]),i=(0,y.ensureParsedJSONObject)(t[1]),this._ensureKnownAddress(r),o=b.default.hashForSignTypedData_v3({data:i}),a=JSON.stringify(i,null,2),u.abrupt("return",this._signEthereumMessage(o,r,!1,a));case 7:case"end":return u.stop()}}),_callee16,this)}))),function _eth_signTypedData_v3(t){return A.apply(this,arguments)})},{key:"_eth_signTypedData_v4",value:(k=_asyncToGenerator(regeneratorRuntime.mark((function _callee17(t){var r,i,o,a;return regeneratorRuntime.wrap((function _callee17$(u){for(;;)switch(u.prev=u.next){case 0:return this._requireAuthorization(),r=(0,y.ensureAddressString)(t[0]),i=(0,y.ensureParsedJSONObject)(t[1]),this._ensureKnownAddress(r),o=b.default.hashForSignTypedData_v4({data:i}),a=JSON.stringify(i,null,2),u.abrupt("return",this._signEthereumMessage(o,r,!1,a));case 7:case"end":return u.stop()}}),_callee17,this)}))),function _eth_signTypedData_v4(t){return k.apply(this,arguments)})},{key:"_cbwallet_arbitrary",value:(T=_asyncToGenerator(regeneratorRuntime.mark((function _callee18(t){var r,i,o;return regeneratorRuntime.wrap((function _callee18$(a){for(;;)switch(a.prev=a.next){case 0:if(r=t[0],"string"==typeof(i=t[1])){a.next=4;break}throw new Error("parameter must be a string");case 4:if("object"==typeof r&&null!==r){a.next=6;break}throw new Error("parameter must be an object");case 6:return a.next=8,this.genericRequest(r,i);case 8:return o=a.sent,a.abrupt("return",{jsonrpc:"2.0",id:0,result:o});case 10:case"end":return a.stop()}}),_callee18,this)}))),function _cbwallet_arbitrary(t){return T.apply(this,arguments)})},{key:"_wallet_addEthereumChain",value:(R=_asyncToGenerator(regeneratorRuntime.mark((function _callee19(t){var r,i,o,a,u,c;return regeneratorRuntime.wrap((function _callee19$(h){for(;;)switch(h.prev=h.next){case 0:if(u=t[0],0!==(null===(r=u.rpcUrls)||void 0===r?void 0:r.length)){h.next=3;break}return h.abrupt("return",{jsonrpc:"2.0",id:0,error:{code:2,message:"please pass in at least 1 rpcUrl"}});case 3:if(u.chainName&&""!==u.chainName.trim()){h.next=5;break}throw l.ethErrors.provider.custom({code:0,message:"chainName is a required field"});case 5:if(u.nativeCurrency){h.next=7;break}throw l.ethErrors.provider.custom({code:0,message:"nativeCurrency is a required field"});case 7:return c=parseInt(u.chainId,16),h.next=10,this.addEthereumChain(c,null!==(i=u.rpcUrls)&&void 0!==i?i:[],null!==(o=u.blockExplorerUrls)&&void 0!==o?o:[],u.chainName,null!==(a=u.iconUrls)&&void 0!==a?a:[],u.nativeCurrency);case 10:if(!h.sent){h.next=15;break}return h.abrupt("return",{jsonrpc:"2.0",id:0,result:null});case 15:return h.abrupt("return",{jsonrpc:"2.0",id:0,error:{code:2,message:"unable to add ethereum chain"}});case 16:case"end":return h.stop()}}),_callee19,this)}))),function _wallet_addEthereumChain(t){return R.apply(this,arguments)})},{key:"_wallet_switchEthereumChain",value:(O=_asyncToGenerator(regeneratorRuntime.mark((function _callee20(t){var r;return regeneratorRuntime.wrap((function _callee20$(i){for(;;)switch(i.prev=i.next){case 0:return r=t[0],i.next=3,this.switchEthereumChain(parseInt(r.chainId,16));case 3:return i.abrupt("return",{jsonrpc:"2.0",id:0,result:null});case 4:case"end":return i.stop()}}),_callee20,this)}))),function _wallet_switchEthereumChain(t){return O.apply(this,arguments)})},{key:"_wallet_watchAsset",value:(u=_asyncToGenerator(regeneratorRuntime.mark((function _callee21(t){var r,i,o,a,u,c,h,p,d;return regeneratorRuntime.wrap((function _callee21$(y){for(;;)switch(y.prev=y.next){case 0:if(i=Array.isArray(t)?t[0]:t,0!==(null===(r=i.type)||void 0===r?void 0:r.length)){y.next=3;break}throw l.ethErrors.rpc.invalidParams({message:"type is a required field"});case 3:if("ERC20"===i.type){y.next=5;break}throw l.ethErrors.rpc.invalidParams({message:"Asset of type '".concat(i.type,"' not supported")});case 5:if(null==i?void 0:i.options){y.next=7;break}throw l.ethErrors.rpc.invalidParams({message:"options is a required field"});case 7:if(i.options.address){y.next=9;break}throw l.ethErrors.rpc.invalidParams({message:"option address is a required option"});case 9:return o=this.getChainId(),a=i.options,u=a.address,c=a.symbol,h=a.image,p=a.decimals,y.next=13,this.watchAsset(i.type,u,c,p,h,o);case 13:return d=y.sent,y.abrupt("return",{jsonrpc:"2.0",id:0,result:d});case 15:case"end":return y.stop()}}),_callee21,this)}))),function _wallet_watchAsset(t){return u.apply(this,arguments)})},{key:"_eth_uninstallFilter",value:function _eth_uninstallFilter(t){var r=(0,y.ensureHexString)(t[0]);return this._filterPolyfill.uninstallFilter(r)}},{key:"_eth_newFilter",value:(a=_asyncToGenerator(regeneratorRuntime.mark((function _callee22(t){var r,i;return regeneratorRuntime.wrap((function _callee22$(o){for(;;)switch(o.prev=o.next){case 0:return r=t[0],o.next=3,this._filterPolyfill.newFilter(r);case 3:return i=o.sent,o.abrupt("return",{jsonrpc:"2.0",id:0,result:i});case 5:case"end":return o.stop()}}),_callee22,this)}))),function _eth_newFilter(t){return a.apply(this,arguments)})},{key:"_eth_newBlockFilter",value:(i=_asyncToGenerator(regeneratorRuntime.mark((function _callee23(){var t;return regeneratorRuntime.wrap((function _callee23$(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this._filterPolyfill.newBlockFilter();case 2:return t=r.sent,r.abrupt("return",{jsonrpc:"2.0",id:0,result:t});case 4:case"end":return r.stop()}}),_callee23,this)}))),function _eth_newBlockFilter(){return i.apply(this,arguments)})},{key:"_eth_newPendingTransactionFilter",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function _callee24(){var t;return regeneratorRuntime.wrap((function _callee24$(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this._filterPolyfill.newPendingTransactionFilter();case 2:return t=r.sent,r.abrupt("return",{jsonrpc:"2.0",id:0,result:t});case 4:case"end":return r.stop()}}),_callee24,this)}))),function _eth_newPendingTransactionFilter(){return r.apply(this,arguments)})},{key:"_eth_getFilterChanges",value:function _eth_getFilterChanges(t){var r=(0,y.ensureHexString)(t[0]);return this._filterPolyfill.getFilterChanges(r)}},{key:"_eth_getFilterLogs",value:function _eth_getFilterLogs(t){var r=(0,y.ensureHexString)(t[0]);return this._filterPolyfill.getFilterLogs(r)}},{key:"initializeRelay",value:function initializeRelay(){var t=this;return this._relay?Promise.resolve(this._relay):this._relayProvider().then((function(r){return r.setAccountsCallback((function(r){return t._setAddresses(r)})),r.setChainCallback((function(r,i){t.updateProviderInfo(i,parseInt(r,10),!0)})),t._relay=r,r}))}}]),CoinbaseWalletProvider}(u.default);r.CoinbaseWalletProvider=O},56298:function(t,r,i){"use strict";function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,o=new Array(r);i<r;i++)o[i]=t[i];return o}function asyncGeneratorStep(t,r,i,o,a,u,c){try{var l=t[u](c),h=l.value}catch(p){return void i(p)}l.done?r(h):Promise.resolve(h).then(o,a)}function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(o,a){var u=t.apply(r,i);function _next(t){asyncGeneratorStep(u,o,a,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(u,o,a,_next,_throw,"throw",t)}_next(void 0)}))}}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var o=r[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}Object.defineProperty(r,"__esModule",{value:!0}),r.filterFromParam=r.FilterPolyfill=void 0;var o=i(32242),a=i(89591),u={jsonrpc:"2.0",id:0},c=function(){function FilterPolyfill(t){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,FilterPolyfill),this.logFilters=new Map,this.blockFilters=new Set,this.pendingTransactionFilters=new Set,this.cursors=new Map,this.timeouts=new Map,this.nextFilterId=(0,o.IntNumber)(1),this.provider=t}var t,r,i,c,l,h,p,d,y,b;return function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(FilterPolyfill,[{key:"newFilter",value:(b=_asyncToGenerator(regeneratorRuntime.mark((function _callee(t){var r,i,o;return regeneratorRuntime.wrap((function _callee$(u){for(;;)switch(u.prev=u.next){case 0:return r=filterFromParam(t),i=this.makeFilterId(),u.next=4,this.setInitialCursorPosition(i,r.fromBlock);case 4:return o=u.sent,console.log("Installing new log filter(".concat(i,"):"),r,"initial cursor position:",o),this.logFilters.set(i,r),this.setFilterTimeout(i),u.abrupt("return",(0,a.hexStringFromIntNumber)(i));case 9:case"end":return u.stop()}}),_callee,this)}))),function newFilter(t){return b.apply(this,arguments)})},{key:"newBlockFilter",value:(y=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var t,r;return regeneratorRuntime.wrap((function _callee2$(i){for(;;)switch(i.prev=i.next){case 0:return t=this.makeFilterId(),i.next=3,this.setInitialCursorPosition(t,"latest");case 3:return r=i.sent,console.log("Installing new block filter (".concat(t,") with initial cursor position:"),r),this.blockFilters.add(t),this.setFilterTimeout(t),i.abrupt("return",(0,a.hexStringFromIntNumber)(t));case 8:case"end":return i.stop()}}),_callee2,this)}))),function newBlockFilter(){return y.apply(this,arguments)})},{key:"newPendingTransactionFilter",value:(d=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){var t,r;return regeneratorRuntime.wrap((function _callee3$(i){for(;;)switch(i.prev=i.next){case 0:return t=this.makeFilterId(),i.next=3,this.setInitialCursorPosition(t,"latest");case 3:return r=i.sent,console.log("Installing new block filter (".concat(t,") with initial cursor position:"),r),this.pendingTransactionFilters.add(t),this.setFilterTimeout(t),i.abrupt("return",(0,a.hexStringFromIntNumber)(t));case 8:case"end":return i.stop()}}),_callee3,this)}))),function newPendingTransactionFilter(){return d.apply(this,arguments)})},{key:"uninstallFilter",value:function uninstallFilter(t){var r=(0,a.intNumberFromHexString)(t);return console.log("Uninstalling filter (".concat(r,")")),this.deleteFilter(r),!0}},{key:"getFilterChanges",value:function getFilterChanges(t){var r=(0,a.intNumberFromHexString)(t);return this.timeouts.has(r)&&this.setFilterTimeout(r),this.logFilters.has(r)?this.getLogFilterChanges(r):this.blockFilters.has(r)?this.getBlockFilterChanges(r):this.pendingTransactionFilters.has(r)?this.getPendingTransactionFilterChanges(r):Promise.resolve(filterNotFoundError())}},{key:"getFilterLogs",value:(p=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(t){var r,i;return regeneratorRuntime.wrap((function _callee4$(o){for(;;)switch(o.prev=o.next){case 0:if(r=(0,a.intNumberFromHexString)(t),i=this.logFilters.get(r)){o.next=4;break}return o.abrupt("return",filterNotFoundError());case 4:return o.abrupt("return",this.sendAsyncPromise(Object.assign(Object.assign({},u),{method:"eth_getLogs",params:[paramFromFilter(i)]})));case 5:case"end":return o.stop()}}),_callee4,this)}))),function getFilterLogs(t){return p.apply(this,arguments)})},{key:"makeFilterId",value:function makeFilterId(){return(0,o.IntNumber)(++this.nextFilterId)}},{key:"sendAsyncPromise",value:function sendAsyncPromise(t){var r=this;return new Promise((function(i,o){r.provider.sendAsync(t,(function(t,r){return t?o(t):Array.isArray(r)||null==r?o(new Error("unexpected response received: ".concat(JSON.stringify(r)))):void i(r)}))}))}},{key:"deleteFilter",value:function deleteFilter(t){console.log("Deleting filter (".concat(t,")")),this.logFilters.delete(t),this.blockFilters.delete(t),this.pendingTransactionFilters.delete(t),this.cursors.delete(t),this.timeouts.delete(t)}},{key:"getLogFilterChanges",value:(h=_asyncToGenerator(regeneratorRuntime.mark((function _callee5(t){var r,i,c,l,h,p,d,y;return regeneratorRuntime.wrap((function _callee5$(b){for(;;)switch(b.prev=b.next){case 0:if(r=this.logFilters.get(t),(i=this.cursors.get(t))&&r){b.next=4;break}return b.abrupt("return",filterNotFoundError());case 4:return b.next=6,this.getCurrentBlockHeight();case 6:if(c=b.sent,l="latest"===r.toBlock?c:r.toBlock,!(i>c)){b.next=10;break}return b.abrupt("return",emptyResult());case 10:if(!(i>r.toBlock)){b.next=12;break}return b.abrupt("return",emptyResult());case 12:return console.log("Fetching logs from ".concat(i," to ").concat(l," for filter ").concat(t)),b.next=15,this.sendAsyncPromise(Object.assign(Object.assign({},u),{method:"eth_getLogs",params:[paramFromFilter(Object.assign(Object.assign({},r),{fromBlock:i,toBlock:l}))]}));case 15:return h=b.sent,Array.isArray(h.result)&&(p=h.result.map((function(t){return(0,a.intNumberFromHexString)(t.blockNumber||"0x0")})),(d=Math.max.apply(Math,_toConsumableArray(p)))&&d>i&&(y=(0,o.IntNumber)(d+1),console.log("Moving cursor position for filter (".concat(t,") from ").concat(i," to ").concat(y)),this.cursors.set(t,y))),b.abrupt("return",h);case 18:case"end":return b.stop()}}),_callee5,this)}))),function getLogFilterChanges(t){return h.apply(this,arguments)})},{key:"getBlockFilterChanges",value:(l=_asyncToGenerator(regeneratorRuntime.mark((function _callee6(t){var r,i,c,l,h=this;return regeneratorRuntime.wrap((function _callee6$(p){for(;;)switch(p.prev=p.next){case 0:if(r=this.cursors.get(t)){p.next=3;break}return p.abrupt("return",filterNotFoundError());case 3:return p.next=5,this.getCurrentBlockHeight();case 5:if(i=p.sent,!(r>i)){p.next=8;break}return p.abrupt("return",emptyResult());case 8:return console.log("Fetching blocks from ".concat(r," to ").concat(i," for filter (").concat(t,")")),p.next=11,Promise.all((0,a.range)(r,i+1).map((function(t){return h.getBlockHashByNumber((0,o.IntNumber)(t))})));case 11:return c=p.sent.filter((function(t){return!!t})),l=(0,o.IntNumber)(r+c.length),console.log("Moving cursor position for filter (".concat(t,") from ").concat(r," to ").concat(l)),this.cursors.set(t,l),p.abrupt("return",Object.assign(Object.assign({},u),{result:c}));case 16:case"end":return p.stop()}}),_callee6,this)}))),function getBlockFilterChanges(t){return l.apply(this,arguments)})},{key:"getPendingTransactionFilterChanges",value:(c=_asyncToGenerator(regeneratorRuntime.mark((function _callee7(t){return regeneratorRuntime.wrap((function _callee7$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Promise.resolve(emptyResult()));case 1:case"end":return t.stop()}}),_callee7)}))),function getPendingTransactionFilterChanges(t){return c.apply(this,arguments)})},{key:"setInitialCursorPosition",value:(i=_asyncToGenerator(regeneratorRuntime.mark((function _callee8(t,r){var i,o;return regeneratorRuntime.wrap((function _callee8$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,this.getCurrentBlockHeight();case 2:return i=a.sent,o="number"==typeof r&&r>i?r:i,this.cursors.set(t,o),a.abrupt("return",o);case 6:case"end":return a.stop()}}),_callee8,this)}))),function setInitialCursorPosition(t,r){return i.apply(this,arguments)})},{key:"setFilterTimeout",value:function setFilterTimeout(t){var r=this,i=this.timeouts.get(t);i&&window.clearTimeout(i);var o=window.setTimeout((function(){console.log("Filter (".concat(t,") timed out")),r.deleteFilter(t)}),3e5);this.timeouts.set(t,o)}},{key:"getCurrentBlockHeight",value:(r=_asyncToGenerator(regeneratorRuntime.mark((function _callee9(){var t,r;return regeneratorRuntime.wrap((function _callee9$(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.sendAsyncPromise(Object.assign(Object.assign({},u),{method:"eth_blockNumber",params:[]}));case 2:return t=i.sent,r=t.result,i.abrupt("return",(0,a.intNumberFromHexString)((0,a.ensureHexString)(r)));case 5:case"end":return i.stop()}}),_callee9,this)}))),function getCurrentBlockHeight(){return r.apply(this,arguments)})},{key:"getBlockHashByNumber",value:(t=_asyncToGenerator(regeneratorRuntime.mark((function _callee10(t){var r;return regeneratorRuntime.wrap((function _callee10$(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,this.sendAsyncPromise(Object.assign(Object.assign({},u),{method:"eth_getBlockByNumber",params:[(0,a.hexStringFromIntNumber)(t),!1]}));case 2:if(!(r=i.sent).result||"string"!=typeof r.result.hash){i.next=5;break}return i.abrupt("return",(0,a.ensureHexString)(r.result.hash));case 5:return i.abrupt("return",null);case 6:case"end":return i.stop()}}),_callee10,this)}))),function getBlockHashByNumber(r){return t.apply(this,arguments)})}]),FilterPolyfill}();function filterFromParam(t){return{fromBlock:intBlockHeightFromHexBlockHeight(t.fromBlock),toBlock:intBlockHeightFromHexBlockHeight(t.toBlock),addresses:void 0===t.address?null:Array.isArray(t.address)?t.address:[t.address],topics:t.topics||[]}}function paramFromFilter(t){var r={fromBlock:hexBlockHeightFromIntBlockHeight(t.fromBlock),toBlock:hexBlockHeightFromIntBlockHeight(t.toBlock),topics:t.topics};return null!==t.addresses&&(r.address=t.addresses),r}function intBlockHeightFromHexBlockHeight(t){if(void 0===t||"latest"===t||"pending"===t)return"latest";if("earliest"===t)return(0,o.IntNumber)(0);if((0,a.isHexString)(t))return(0,a.intNumberFromHexString)(t);throw new Error("Invalid block option: ".concat(String(t)))}function hexBlockHeightFromIntBlockHeight(t){return"latest"===t?t:(0,a.hexStringFromIntNumber)(t)}function filterNotFoundError(){return Object.assign(Object.assign({},u),{error:{code:-32e3,message:"filter not found"}})}function emptyResult(){return Object.assign(Object.assign({},u),{result:[]})}r.FilterPolyfill=c,r.filterFromParam=filterFromParam},11695:function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.JSONRPCMethod=void 0,function(t){t.eth_accounts="eth_accounts",t.eth_coinbase="eth_coinbase",t.net_version="net_version",t.eth_chainId="eth_chainId",t.eth_uninstallFilter="eth_uninstallFilter",t.eth_requestAccounts="eth_requestAccounts",t.eth_sign="eth_sign",t.eth_ecRecover="eth_ecRecover",t.personal_sign="personal_sign",t.personal_ecRecover="personal_ecRecover",t.eth_signTransaction="eth_signTransaction",t.eth_sendRawTransaction="eth_sendRawTransaction",t.eth_sendTransaction="eth_sendTransaction",t.eth_signTypedData_v1="eth_signTypedData_v1",t.eth_signTypedData_v2="eth_signTypedData_v2",t.eth_signTypedData_v3="eth_signTypedData_v3",t.eth_signTypedData_v4="eth_signTypedData_v4",t.eth_signTypedData="eth_signTypedData",t.cbWallet_arbitrary="walletlink_arbitrary",t.wallet_addEthereumChain="wallet_addEthereumChain",t.wallet_switchEthereumChain="wallet_switchEthereumChain",t.wallet_watchAsset="wallet_watchAsset",t.eth_subscribe="eth_subscribe",t.eth_unsubscribe="eth_unsubscribe",t.eth_newFilter="eth_newFilter",t.eth_newBlockFilter="eth_newBlockFilter",t.eth_newPendingTransactionFilter="eth_newPendingTransactionFilter",t.eth_getFilterChanges="eth_getFilterChanges",t.eth_getFilterLogs="eth_getFilterLogs"}(r.JSONRPCMethod||(r.JSONRPCMethod={}))},76937:function(t,r,i){"use strict";function asyncGeneratorStep(t,r,i,o,a,u,c){try{var l=t[u](c),h=l.value}catch(p){return void i(p)}l.done?r(h):Promise.resolve(h).then(o,a)}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var o=r[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}Object.defineProperty(r,"__esModule",{value:!0}),r.SubscriptionManager=void 0;var o=i(1861),a=i(72241),u=function noop(){},c=function(){function SubscriptionManager(t){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,SubscriptionManager);var r=new o({provider:t,pollingInterval:15e3,setSkipCacheFlag:!0}),i=a({blockTracker:r,provider:t}),u=i.events,c=i.middleware;this.events=u,this.subscriptionMiddleware=c}var t;return function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(SubscriptionManager,[{key:"handleRequest",value:(t=function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(o,a){var u=t.apply(r,i);function _next(t){asyncGeneratorStep(u,o,a,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(u,o,a,_next,_throw,"throw",t)}_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(t){var r;return regeneratorRuntime.wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:return r={},i.next=3,this.subscriptionMiddleware(t,r,u,u);case 3:return i.abrupt("return",r);case 4:case"end":return i.stop()}}),_callee,this)}))),function handleRequest(r){return t.apply(this,arguments)})},{key:"destroy",value:function destroy(){this.subscriptionMiddleware.destroy()}}]),SubscriptionManager}();r.SubscriptionManager=c},61537:function(t,r,i){"use strict";function _defineProperties(t,r){for(var i=0;i<r.length;i++){var o=r[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}Object.defineProperty(r,"__esModule",{value:!0}),r.Session=void 0;var o=i(33984),a=i(49532),u=i(96826),c=i(89591),l="session:id",h="session:secret",p="session:linked",d=function(){function Session(t,r,i,a){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,Session),this._storage=t,this._id=r||(0,c.randomBytesHex)(16),this._secret=i||(0,c.randomBytesHex)(32);var u=o.sha256.create();u.update("".concat(this._id,", ").concat(this._secret," WalletLink")),this._key=u.hex(),this._linked=!!a}return function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(Session,[{key:"id",get:function get(){return this._id}},{key:"secret",get:function get(){return this._secret}},{key:"key",get:function get(){return this._key}},{key:"linked",get:function get(){return this._linked},set:function set(t){this._linked=t,this.persistLinked()}},{key:"save",value:function save(){return this._storage.setItem(l,this._id),this._storage.setItem(h,this._secret),this.persistLinked(),this}},{key:"persistLinked",value:function persistLinked(){this._storage.setItem(p,this._linked?"1":"0")}}],[{key:"load",value:function load(t){var r=t.getItem(l),i=t.getItem(p),o=t.getItem(h);return r&&o?new Session(t,r,o,"1"===i):null}},{key:"persistedSessionIdChange$",get:function get(){return(0,a.fromEvent)(window,"storage").pipe((0,u.filter)((function(t){return t.key===l})),(0,u.map)((function(t){return{oldValue:t.oldValue||null,newValue:t.newValue||null}})))}},{key:"hash",value:function hash(t){var hash=o.sha256.create();return hash.update(t).hex()}}]),Session}();r.Session=d},12067:function(t,r,i){"use strict";function asyncGeneratorStep(t,r,i,o,a,u,c){try{var l=t[u](c),h=l.value}catch(p){return void i(p)}l.done?r(h):Promise.resolve(h).then(o,a)}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var o=r[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}Object.defineProperty(r,"__esModule",{value:!0}),r.WalletSDKRelayAbstract=r.APP_VERSION_KEY=r.LOCAL_STORAGE_ADDRESSES_KEY=r.WALLET_USER_NAME_KEY=void 0;var o=i(36051);r.WALLET_USER_NAME_KEY="walletUsername",r.LOCAL_STORAGE_ADDRESSES_KEY="Addresses",r.APP_VERSION_KEY="AppVersion";var a=function(){function WalletSDKRelayAbstract(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,WalletSDKRelayAbstract)}var t;return function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(WalletSDKRelayAbstract,[{key:"makeEthereumJSONRPCRequest",value:(t=function _asyncToGenerator(t){return function(){var r=this,i=arguments;return new Promise((function(o,a){var u=t.apply(r,i);function _next(t){asyncGeneratorStep(u,o,a,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(u,o,a,_next,_throw,"throw",t)}_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(t,r){return regeneratorRuntime.wrap((function _callee$(i){for(;;)switch(i.prev=i.next){case 0:if(r){i.next=2;break}throw new Error("Error: No jsonRpcUrl provided");case 2:return i.abrupt("return",window.fetch(r,{method:"POST",body:JSON.stringify(t),mode:"cors",headers:{"Content-Type":"application/json"}}).then((function(t){return t.json()})).then((function(t){if(!t)throw o.ethErrors.rpc.parse({});var r=t,i=r.error;if(i)throw(0,o.serializeError)(i);return r})));case 3:case"end":return i.stop()}}),_callee)}))),function makeEthereumJSONRPCRequest(r,i){return t.apply(this,arguments)})}]),WalletSDKRelayAbstract}();r.WalletSDKRelayAbstract=a},86318:function(t,r,i){"use strict";function _defineProperties(t,r){for(var i=0;i<r.length;i++){var o=r[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}Object.defineProperty(r,"__esModule",{value:!0}),r.WalletSDKRelayEventManager=void 0;var o=i(89591),a=function(){function WalletSDKRelayEventManager(){!function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,WalletSDKRelayEventManager),this._nextRequestId=0,this.callbacks=new Map}return function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(WalletSDKRelayEventManager,[{key:"makeRequestId",value:function makeRequestId(){this._nextRequestId=(this._nextRequestId+1)%2147483647;var t=this._nextRequestId,r=(0,o.prepend0x)(t.toString(16));return this.callbacks.get(r)&&this.callbacks.delete(r),t}}]),WalletSDKRelayEventManager}();r.WalletSDKRelayEventManager=a},87437:function(t,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Web3Method=void 0,function(t){t.requestEthereumAccounts="requestEthereumAccounts",t.signEthereumMessage="signEthereumMessage",t.signEthereumTransaction="signEthereumTransaction",t.submitEthereumTransaction="submitEthereumTransaction",t.ethereumAddressFromSignedMessage="ethereumAddressFromSignedMessage",t.scanQRCode="scanQRCode",t.generic="generic",t.childRequestEthereumAccounts="childRequestEthereumAccounts",t.addEthereumChain="addEthereumChain",t.switchEthereumChain="switchEthereumChain",t.makeEthereumJSONRPCRequest="makeEthereumJSONRPCRequest",t.watchAsset="watchAsset"}(r.Web3Method||(r.Web3Method={}))},44337:function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.EthereumAddressFromSignedMessageResponse=r.SubmitEthereumTransactionResponse=r.SignEthereumTransactionResponse=r.SignEthereumMessageResponse=r.isRequestEthereumAccountsResponse=r.WatchAssetReponse=r.RequestEthereumAccountsResponse=r.SwitchEthereumChainResponse=r.AddEthereumChainResponse=r.ErrorResponse=void 0;var o=i(87437);r.ErrorResponse=function ErrorResponse(t,r,i){return{method:t,errorMessage:r,errorCode:i}},r.AddEthereumChainResponse=function AddEthereumChainResponse(t){return{method:o.Web3Method.addEthereumChain,result:t}},r.SwitchEthereumChainResponse=function SwitchEthereumChainResponse(t){return{method:o.Web3Method.switchEthereumChain,result:t}},r.RequestEthereumAccountsResponse=function RequestEthereumAccountsResponse(t){return{method:o.Web3Method.requestEthereumAccounts,result:t}},r.WatchAssetReponse=function WatchAssetReponse(t){return{method:o.Web3Method.watchAsset,result:t}},r.isRequestEthereumAccountsResponse=function isRequestEthereumAccountsResponse(t){return t&&t.method===o.Web3Method.requestEthereumAccounts},r.SignEthereumMessageResponse=function SignEthereumMessageResponse(t){return{method:o.Web3Method.signEthereumMessage,result:t}},r.SignEthereumTransactionResponse=function SignEthereumTransactionResponse(t){return{method:o.Web3Method.signEthereumTransaction,result:t}},r.SubmitEthereumTransactionResponse=function SubmitEthereumTransactionResponse(t){return{method:o.Web3Method.submitEthereumTransaction,result:t}},r.EthereumAddressFromSignedMessageResponse=function EthereumAddressFromSignedMessageResponse(t){return{method:o.Web3Method.ethereumAddressFromSignedMessage,result:t}}},32242:function(t,r){"use strict";function OpaqueType(){return function(t){return t}}Object.defineProperty(r,"__esModule",{value:!0}),r.RegExpString=r.IntNumber=r.BigIntString=r.AddressString=r.HexString=r.OpaqueType=void 0,r.OpaqueType=OpaqueType,r.HexString=function(t){return t},r.AddressString=function(t){return t},r.BigIntString=function(t){return t},r.IntNumber=function IntNumber(t){return Math.floor(t)},r.RegExpString=function(t){return t}},89591:function(t,r,i){"use strict";var o=i(29033).Buffer;function _toConsumableArray(t){return function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}(t)||function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function _unsupportedIterableToArray(t,r){if(!t)return;if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _arrayLikeToArray(t,r)}(t)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,o=new Array(r);i<r;i++)o[i]=t[i];return o}var a=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(r,"__esModule",{value:!0}),r.createQrUrl=r.getFavicon=r.range=r.isBigNumber=r.ensureParsedJSONObject=r.ensureBN=r.ensureRegExpString=r.ensureIntNumber=r.ensureBuffer=r.ensureAddressString=r.ensureEvenLengthHexString=r.ensureHexString=r.isHexString=r.prepend0x=r.strip0x=r.has0xPrefix=r.hexStringFromIntNumber=r.intNumberFromHexString=r.bigIntStringFromBN=r.hexStringFromBuffer=r.hexStringToUint8Array=r.uint8ArrayToHex=r.randomBytesHex=void 0;var u=a(i(31734)),c=i(31321),l=i(32242),h=/^[0-9]*$/,p=/^[a-f0-9]*$/;function uint8ArrayToHex(t){return _toConsumableArray(t).map((function(t){return t.toString(16).padStart(2,"0")})).join("")}function has0xPrefix(t){return t.startsWith("0x")||t.startsWith("0X")}function strip0x(t){return has0xPrefix(t)?t.slice(2):t}function prepend0x(t){return has0xPrefix(t)?"0x"+t.slice(2):"0x"+t}function isHexString(t){if("string"!=typeof t)return!1;var r=strip0x(t).toLowerCase();return p.test(r)}function ensureHexString(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("string"==typeof t){var i=strip0x(t).toLowerCase();if(p.test(i))return(0,l.HexString)(r?"0x"+i:i)}throw new Error('"'.concat(String(t),'" is not a hexadecimal string'))}function ensureEvenLengthHexString(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=ensureHexString(t,!1);return i.length%2==1&&(i=(0,l.HexString)("0"+i)),r?(0,l.HexString)("0x"+i):i}function ensureIntNumber(t){if("number"==typeof t&&Number.isInteger(t))return(0,l.IntNumber)(t);if("string"==typeof t){if(h.test(t))return(0,l.IntNumber)(Number(t));if(isHexString(t))return(0,l.IntNumber)(new u.default(ensureEvenLengthHexString(t,!1),16).toNumber())}throw new Error("Not an integer: ".concat(String(t)))}function isBigNumber(t){if(null==t||"function"!=typeof t.constructor)return!1;var r=t.constructor;return"function"==typeof r.config&&"number"==typeof r.EUCLID}r.randomBytesHex=function randomBytesHex(t){return uint8ArrayToHex(crypto.getRandomValues(new Uint8Array(t)))},r.uint8ArrayToHex=uint8ArrayToHex,r.hexStringToUint8Array=function hexStringToUint8Array(t){return new Uint8Array(t.match(/.{1,2}/g).map((function(t){return parseInt(t,16)})))},r.hexStringFromBuffer=function hexStringFromBuffer(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t.toString("hex");return(0,l.HexString)(r?"0x"+i:i)},r.bigIntStringFromBN=function bigIntStringFromBN(t){return(0,l.BigIntString)(t.toString(10))},r.intNumberFromHexString=function intNumberFromHexString(t){return(0,l.IntNumber)(new u.default(ensureEvenLengthHexString(t,!1),16).toNumber())},r.hexStringFromIntNumber=function hexStringFromIntNumber(t){return(0,l.HexString)("0x"+new u.default(t).toString(16))},r.has0xPrefix=has0xPrefix,r.strip0x=strip0x,r.prepend0x=prepend0x,r.isHexString=isHexString,r.ensureHexString=ensureHexString,r.ensureEvenLengthHexString=ensureEvenLengthHexString,r.ensureAddressString=function ensureAddressString(t){if("string"==typeof t){var r=strip0x(t).toLowerCase();if(isHexString(r)&&40===r.length)return(0,l.AddressString)(prepend0x(r))}throw new Error("Invalid Ethereum address: ".concat(String(t)))},r.ensureBuffer=function ensureBuffer(t){if(o.isBuffer(t))return t;if("string"==typeof t){if(isHexString(t)){var r=ensureEvenLengthHexString(t,!1);return o.from(r,"hex")}return o.from(t,"utf8")}throw new Error("Not binary data: ".concat(String(t)))},r.ensureIntNumber=ensureIntNumber,r.ensureRegExpString=function ensureRegExpString(t){if(t instanceof RegExp)return(0,l.RegExpString)(t.toString());throw new Error("Not a RegExp: ".concat(String(t)))},r.ensureBN=function ensureBN(t){if(null!==t&&(u.default.isBN(t)||isBigNumber(t)))return new u.default(t.toString(10),10);if("number"==typeof t)return new u.default(ensureIntNumber(t));if("string"==typeof t){if(h.test(t))return new u.default(t,10);if(isHexString(t))return new u.default(ensureEvenLengthHexString(t,!1),16)}throw new Error("Not an integer: ".concat(String(t)))},r.ensureParsedJSONObject=function ensureParsedJSONObject(t){if("string"==typeof t)return JSON.parse(t);if("object"==typeof t)return t;throw new Error("Not a JSON string or an object: ".concat(String(t)))},r.isBigNumber=isBigNumber,r.range=function range(t,r){return Array.from({length:r-t},(function(r,i){return t+i}))},r.getFavicon=function getFavicon(){var t=document.querySelector('link[sizes="192x192"]')||document.querySelector('link[sizes="180x180"]')||document.querySelector('link[rel="icon"]')||document.querySelector('link[rel="shortcut icon"]'),r=document.location,i=r.protocol,o=r.host,a=t?t.getAttribute("href"):null;return!a||a.startsWith("javascript:")?null:a.startsWith("http://")||a.startsWith("https://")||a.startsWith("data:")?a:a.startsWith("//")?i+a:"".concat(i,"//").concat(o).concat(a)},r.createQrUrl=function createQrUrl(t,r,i,o){var a=o?"parent-id":"id",u=(0,c.stringify)({[a]:t,secret:r,server:i,v:"1"});return"".concat(i,"/#/link?").concat(u)}},2005:function(t,r,i){var o=i(29033).Buffer,a=i(77343),u=i(31734);function elementaryName(t){return t.startsWith("int[")?"int256"+t.slice(3):"int"===t?"int256":t.startsWith("uint[")?"uint256"+t.slice(4):"uint"===t?"uint256":t.startsWith("fixed[")?"fixed128x128"+t.slice(5):"fixed"===t?"fixed128x128":t.startsWith("ufixed[")?"ufixed128x128"+t.slice(6):"ufixed"===t?"ufixed128x128":t}function parseTypeN(t){return parseInt(/^\D+(\d+)$/.exec(t)[1],10)}function parseTypeNxM(t){var r=/^\D+(\d+)x(\d+)$/.exec(t);return[parseInt(r[1],10),parseInt(r[2],10)]}function parseTypeArray(t){var r=t.match(/(.*)\[(.*?)\]$/);return r?""===r[2]?"dynamic":parseInt(r[2],10):null}function parseNumber(t){var r=typeof t;if("string"===r)return a.isHexString(t)?new u(a.stripHexPrefix(t),16):new u(t,10);if("number"===r)return new u(t);if(t.toArray)return t;throw new Error("Argument is not a number")}function encodeSingle(t,r){var i,c,l,h;if("address"===t)return encodeSingle("uint160",parseNumber(r));if("bool"===t)return encodeSingle("uint8",r?1:0);if("string"===t)return encodeSingle("bytes",new o(r,"utf8"));if(function isArray(t){return t.lastIndexOf("]")===t.length-1}(t)){if(void 0===r.length)throw new Error("Not an array?");if("dynamic"!==(i=parseTypeArray(t))&&0!==i&&r.length>i)throw new Error("Elements exceed array size: "+i);for(h in l=[],t=t.slice(0,t.lastIndexOf("[")),"string"==typeof r&&(r=JSON.parse(r)),r)l.push(encodeSingle(t,r[h]));if("dynamic"===i){var p=encodeSingle("uint256",r.length);l.unshift(p)}return o.concat(l)}if("bytes"===t)return r=new o(r),l=o.concat([encodeSingle("uint256",r.length),r]),r.length%32!=0&&(l=o.concat([l,a.zeros(32-r.length%32)])),l;if(t.startsWith("bytes")){if((i=parseTypeN(t))<1||i>32)throw new Error("Invalid bytes<N> width: "+i);return a.setLengthRight(r,32)}if(t.startsWith("uint")){if((i=parseTypeN(t))%8||i<8||i>256)throw new Error("Invalid uint<N> width: "+i);if((c=parseNumber(r)).bitLength()>i)throw new Error("Supplied uint exceeds width: "+i+" vs "+c.bitLength());if(c<0)throw new Error("Supplied uint is negative");return c.toArrayLike(o,"be",32)}if(t.startsWith("int")){if((i=parseTypeN(t))%8||i<8||i>256)throw new Error("Invalid int<N> width: "+i);if((c=parseNumber(r)).bitLength()>i)throw new Error("Supplied int exceeds width: "+i+" vs "+c.bitLength());return c.toTwos(256).toArrayLike(o,"be",32)}if(t.startsWith("ufixed")){if(i=parseTypeNxM(t),(c=parseNumber(r))<0)throw new Error("Supplied ufixed is negative");return encodeSingle("uint256",c.mul(new u(2).pow(new u(i[1]))))}if(t.startsWith("fixed"))return i=parseTypeNxM(t),encodeSingle("int256",parseNumber(r).mul(new u(2).pow(new u(i[1]))));throw new Error("Unsupported or invalid type: "+t)}function isDynamic(t){return"string"===t||"bytes"===t||"dynamic"===parseTypeArray(t)}function solidityPack(t,r){if(t.length!==r.length)throw new Error("Number of types are not matching the values");for(var i,u,c=[],l=0;l<t.length;l++){var h=elementaryName(t[l]),p=r[l];if("bytes"===h)c.push(p);else if("string"===h)c.push(new o(p,"utf8"));else if("bool"===h)c.push(new o(p?"01":"00","hex"));else if("address"===h)c.push(a.setLength(p,20));else if(h.startsWith("bytes")){if((i=parseTypeN(h))<1||i>32)throw new Error("Invalid bytes<N> width: "+i);c.push(a.setLengthRight(p,i))}else if(h.startsWith("uint")){if((i=parseTypeN(h))%8||i<8||i>256)throw new Error("Invalid uint<N> width: "+i);if((u=parseNumber(p)).bitLength()>i)throw new Error("Supplied uint exceeds width: "+i+" vs "+u.bitLength());c.push(u.toArrayLike(o,"be",i/8))}else{if(!h.startsWith("int"))throw new Error("Unsupported or invalid type: "+h);if((i=parseTypeN(h))%8||i<8||i>256)throw new Error("Invalid int<N> width: "+i);if((u=parseNumber(p)).bitLength()>i)throw new Error("Supplied int exceeds width: "+i+" vs "+u.bitLength());c.push(u.toTwos(i).toArrayLike(o,"be",i/8))}}return o.concat(c)}t.exports={rawEncode:function rawEncode(t,r){var i=[],a=[],u=32*t.length;for(var c in t){var l=elementaryName(t[c]),h=encodeSingle(l,r[c]);isDynamic(l)?(i.push(encodeSingle("uint256",u)),a.push(h),u+=h.length):i.push(h)}return o.concat(i.concat(a))},solidityPack,soliditySHA3:function soliditySHA3(t,r){return a.keccak(solidityPack(t,r))}}},26131:function(t,r,i){var o=i(29033).Buffer;function _createForOfIteratorHelper(t,r){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=_unsupportedIterableToArray(t))||r&&t&&"number"==typeof t.length){i&&(t=i);var o=0,a=function F(){};return{s:a,n:function n(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,c=!0,l=!1;return{s:function s(){i=i.call(t)},n:function n(){var t=i.next();return c=t.done,t},e:function e(t){l=!0,u=t},f:function f(){try{c||null==i.return||i.return()}finally{if(l)throw u}}}}function _slicedToArray(t,r){return function _arrayWithHoles(t){if(Array.isArray(t))return t}(t)||function _iterableToArrayLimit(t,r){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var o,a,u=[],c=!0,l=!1;try{for(i=i.call(t);!(c=(o=i.next()).done)&&(u.push(o.value),!r||u.length!==r);c=!0);}catch(h){l=!0,a=h}finally{try{c||null==i.return||i.return()}finally{if(l)throw a}}return u}(t,r)||_unsupportedIterableToArray(t,r)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(t,r){if(t){if("string"==typeof t)return _arrayLikeToArray(t,r);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,r):void 0}}function _arrayLikeToArray(t,r){(null==r||r>t.length)&&(r=t.length);for(var i=0,o=new Array(r);i<r;i++)o[i]=t[i];return o}var a=i(77343),u=i(2005),c={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},l={encodeData(t,r,i){var c=this,l=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],h=["bytes32"],p=[this.hashType(t,i)];if(l){var d,y=function encodeField(t,r,h){if(void 0!==i[r])return["bytes32",null==h?"0x0000000000000000000000000000000000000000000000000000000000000000":a.keccak(c.encodeData(r,h,i,l))];if(void 0===h)throw new Error("missing value for field ".concat(t," of type ").concat(r));if("bytes"===r)return["bytes32",a.keccak(h)];if("string"===r)return"string"==typeof h&&(h=o.from(h,"utf8")),["bytes32",a.keccak(h)];if(r.lastIndexOf("]")===r.length-1){var p=r.slice(0,r.lastIndexOf("[")),d=h.map((function(r){return encodeField(t,p,r)}));return["bytes32",a.keccak(u.rawEncode(d.map((function(t){return _slicedToArray(t,1)[0]})),d.map((function(t){return _slicedToArray(t,2)[1]}))))]}return[r,h]},b=_createForOfIteratorHelper(i[t]);try{for(b.s();!(d=b.n()).done;){var v=d.value,g=_slicedToArray(y(v.name,v.type,r[v.name]),2),m=g[0],_=g[1];h.push(m),p.push(_)}}catch(R){b.e(R)}finally{b.f()}}else{var w,S=_createForOfIteratorHelper(i[t]);try{for(S.s();!(w=S.n()).done;){var x=w.value,O=r[x.name];if(void 0!==O)if("bytes"===x.type)h.push("bytes32"),O=a.keccak(O),p.push(O);else if("string"===x.type)h.push("bytes32"),"string"==typeof O&&(O=o.from(O,"utf8")),O=a.keccak(O),p.push(O);else if(void 0!==i[x.type])h.push("bytes32"),O=a.keccak(this.encodeData(x.type,O,i,l)),p.push(O);else{if(x.type.lastIndexOf("]")===x.type.length-1)throw new Error("Arrays currently unimplemented in encodeData");h.push(x.type),p.push(O)}}}catch(R){S.e(R)}finally{S.f()}}return u.rawEncode(h,p)},encodeType(t,r){var i,o="",a=this.findTypeDependencies(t,r).filter((function(r){return r!==t})),u=_createForOfIteratorHelper(a=[t].concat(a.sort()));try{for(u.s();!(i=u.n()).done;){var c=i.value;if(!r[c])throw new Error("No type definition specified: "+c);o+=c+"("+r[c].map((function(t){var r=t.name;return t.type+" "+r})).join(",")+")"}}catch(l){u.e(l)}finally{u.f()}return o},findTypeDependencies(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(t=t.match(/^\w*/)[0],i.includes(t)||void 0===r[t])return i;i.push(t);var o,a=_createForOfIteratorHelper(r[t]);try{for(a.s();!(o=a.n()).done;){var u,c=o.value,l=_createForOfIteratorHelper(this.findTypeDependencies(c.type,r,i));try{for(l.s();!(u=l.n()).done;){var h=u.value;!i.includes(h)&&i.push(h)}}catch(p){l.e(p)}finally{l.f()}}}catch(p){a.e(p)}finally{a.f()}return i},hashStruct(t,r,i){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return a.keccak(this.encodeData(t,r,i,o))},hashType(t,r){return a.keccak(this.encodeType(t,r))},sanitizeData(t){var r={};for(var i in c.properties)t[i]&&(r[i]=t[i]);return r.types&&(r.types=Object.assign({EIP712Domain:[]},r.types)),r},hash(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.sanitizeData(t),u=[o.from("1901","hex")];return u.push(this.hashStruct("EIP712Domain",i.domain,i.types,r)),"EIP712Domain"!==i.primaryType&&u.push(this.hashStruct(i.primaryType,i.message,i.types,r)),a.keccak(o.concat(u))}};t.exports={TYPED_MESSAGE_SCHEMA:c,TypedDataUtils:l,hashForSignTypedDataLegacy:function hashForSignTypedDataLegacy(t){return function typedSignatureHashLegacy(t){var r=new Error("Expect argument to be non-empty array");if("object"!=typeof t||!t.length)throw r;var i=t.map((function(t){return"bytes"===t.type?a.toBuffer(t.value):t.value})),o=t.map((function(t){return t.type})),c=t.map((function(t){if(!t.name)throw r;return t.type+" "+t.name}));return u.soliditySHA3(["bytes32","bytes32"],[u.soliditySHA3(new Array(t.length).fill("string"),c),u.soliditySHA3(o,i)])}(t.data)},hashForSignTypedData_v3:function hashForSignTypedData_v3(t){return l.hash(t.data,!1)},hashForSignTypedData_v4:function hashForSignTypedData_v4(t){return l.hash(t.data)}}},77343:function(t,r,i){var o=i(29033).Buffer,a=i(93135),u=i(31734);function zeros(t){return o.allocUnsafe(t).fill(0)}function setLength(t,r,i){var o=zeros(r);return t=toBuffer(t),i?t.length<r?(t.copy(o),o):t.slice(0,r):t.length<r?(t.copy(o,r-t.length),o):t.slice(-r)}function toBuffer(t){if(!o.isBuffer(t))if(Array.isArray(t))t=o.from(t);else if("string"==typeof t)t=isHexString(t)?o.from(function padToEven(t){return t.length%2?"0"+t:t}(stripHexPrefix(t)),"hex"):o.from(t);else if("number"==typeof t)t=intToBuffer(t);else if(null==t)t=o.allocUnsafe(0);else if(u.isBN(t))t=t.toArrayLike(o);else{if(!t.toArray)throw new Error("invalid type");t=o.from(t.toArray())}return t}function isHexString(t){return"string"==typeof t&&t.match(/^0x[0-9A-Fa-f]*$/)}function stripHexPrefix(t){return"string"==typeof t&&t.startsWith("0x")?t.slice(2):t}t.exports={zeros,setLength,setLengthRight:function setLengthRight(t,r){return setLength(t,r,!0)},isHexString,stripHexPrefix,toBuffer,bufferToHex:function bufferToHex(t){return"0x"+(t=toBuffer(t)).toString("hex")},keccak:function keccak(t,r){return t=toBuffer(t),r||(r=256),a("keccak"+r).update(t).digest()}}},25917:function(t,r,i){"use strict";function _classCallCheck(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,r){for(var i=0;i<r.length;i++){var o=r[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _setPrototypeOf(t,r){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,r){return t.__proto__=r,t},_setPrototypeOf(t,r)}function _createSuper(t){var r=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function _createSuperInternal(){var i,o=_getPrototypeOf(t);if(r){var a=_getPrototypeOf(this).constructor;i=Reflect.construct(o,arguments,a)}else i=o.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _possibleConstructorReturn(t,r){if(r&&("object"==typeof r||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function _getPrototypeOf(t){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)},_getPrototypeOf(t)}function safeApply(t,r,i){try{Reflect.apply(t,r,i)}catch(o){setTimeout((function(){throw o}))}}function arrayClone(t){for(var r=t.length,i=new Array(r),o=0;o<r;o+=1)i[o]=t[o];return i}Object.defineProperty(r,"__esModule",{value:!0});var o=function(t){!function _inherits(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),r&&_setPrototypeOf(t,r)}(SafeEventEmitter,t);var r=_createSuper(SafeEventEmitter);function SafeEventEmitter(){return _classCallCheck(this,SafeEventEmitter),r.apply(this,arguments)}return function _createClass(t,r,i){return r&&_defineProperties(t.prototype,r),i&&_defineProperties(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}(SafeEventEmitter,[{key:"emit",value:function emit(t){var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;for(var o=arguments.length,a=new Array(o>1?o-1:0),u=1;u<o;u++)a[u-1]=arguments[u];if(r){var c;if(a.length>0&&(c=a[0]),c instanceof Error)throw c;var l=new Error("Unhandled error.".concat(c?" (".concat(c.message,")"):""));throw l.context=c,l}var h=i[t];if(void 0===h)return!1;if("function"==typeof h)safeApply(h,this,a);else for(var p=h.length,d=arrayClone(h),y=0;y<p;y+=1)safeApply(d[y],this,a);return!0}}]),SafeEventEmitter}(i(38291).EventEmitter);r.default=o},29838:function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=i(16777),a=i(67319),u=function(){function Mutex(){this._semaphore=new a.default(1)}return Mutex.prototype.acquire=function(){return o.__awaiter(this,void 0,void 0,(function(){var t;return o.__generator(this,(function(r){switch(r.label){case 0:return[4,this._semaphore.acquire()];case 1:return t=r.sent(),[2,t[1]]}}))}))},Mutex.prototype.runExclusive=function(t){return this._semaphore.runExclusive((function(){return t()}))},Mutex.prototype.isLocked=function(){return this._semaphore.isLocked()},Mutex.prototype.release=function(){this._semaphore.release()},Mutex}();r.default=u},67319:function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=i(16777),a=function(){function Semaphore(t){if(this._maxConcurrency=t,this._queue=[],t<=0)throw new Error("semaphore must be initialized to a positive value");this._value=t}return Semaphore.prototype.acquire=function(){var t=this,r=this.isLocked(),i=new Promise((function(r){return t._queue.push(r)}));return r||this._dispatch(),i},Semaphore.prototype.runExclusive=function(t){return o.__awaiter(this,void 0,void 0,(function(){var r,i,a;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,this.acquire()];case 1:r=o.sent(),i=r[0],a=r[1],o.label=2;case 2:return o.trys.push([2,,4,5]),[4,t(i)];case 3:return[2,o.sent()];case 4:return a(),[7];case 5:return[2]}}))}))},Semaphore.prototype.isLocked=function(){return this._value<=0},Semaphore.prototype.release=function(){if(this._maxConcurrency>1)throw new Error("this method is unavailabel on semaphores with concurrency > 1; use the scoped release returned by acquire instead");if(this._currentReleaser){var t=this._currentReleaser;this._currentReleaser=void 0,t()}},Semaphore.prototype._dispatch=function(){var t=this,r=this._queue.shift();if(r){var i=!1;this._currentReleaser=function(){i||(i=!0,t._value++,t._dispatch())},r([this._value--,this._currentReleaser])}},Semaphore}();r.default=a},28617:function(t,r,i){"use strict";r.WU=void 0;var o=i(29838);Object.defineProperty(r,"WU",{enumerable:!0,get:function get(){return o.default}});var a=i(67319);var u=i(4229)},4229:function(t,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.withTimeout=void 0;var o=i(16777);r.withTimeout=function withTimeout(t,r,i){var a=this;return void 0===i&&(i=new Error("timeout")),{acquire:function acquire(){return new Promise((function(u,c){return o.__awaiter(a,void 0,void 0,(function(){var a,l;return o.__generator(this,(function(o){switch(o.label){case 0:return a=!1,setTimeout((function(){a=!0,c(i)}),r),[4,t.acquire()];case 1:return l=o.sent(),a?(Array.isArray(l)?l[1]:l)():u(l),[2]}}))}))}))},runExclusive:function runExclusive(t){return o.__awaiter(this,void 0,void 0,(function(){var r,i;return o.__generator(this,(function(o){switch(o.label){case 0:r=function release(){},o.label=1;case 1:return o.trys.push([1,,7,8]),[4,this.acquire()];case 2:return i=o.sent(),Array.isArray(i)?(r=i[1],[4,t(i[0])]):[3,4];case 3:return[2,o.sent()];case 4:return r=i,[4,t()];case 5:return[2,o.sent()];case 6:return[3,8];case 7:return r(),[7];case 8:return[2]}}))}))},release:function release(){t.release()},isLocked:function isLocked(){return t.isLocked()}}}},16777:function(t,r,i){"use strict";i.r(r),i.d(r,{__extends:function(){return __extends},__assign:function(){return a},__rest:function(){return __rest},__decorate:function(){return __decorate},__param:function(){return __param},__metadata:function(){return __metadata},__awaiter:function(){return __awaiter},__generator:function(){return __generator},__createBinding:function(){return u},__exportStar:function(){return __exportStar},__values:function(){return __values},__read:function(){return __read},__spread:function(){return __spread},__spreadArrays:function(){return __spreadArrays},__spreadArray:function(){return __spreadArray},__await:function(){return __await},__asyncGenerator:function(){return __asyncGenerator},__asyncDelegator:function(){return __asyncDelegator},__asyncValues:function(){return __asyncValues},__makeTemplateObject:function(){return __makeTemplateObject},__importStar:function(){return __importStar},__importDefault:function(){return __importDefault},__classPrivateFieldGet:function(){return __classPrivateFieldGet},__classPrivateFieldSet:function(){return __classPrivateFieldSet}});var o=function extendStatics(t,r){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},o(t,r)};function __extends(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function __(){this.constructor=t}o(t,r),t.prototype=null===r?Object.create(r):(__.prototype=r.prototype,new __)}var a=function __assign(){return a=Object.assign||function __assign(t){for(var r,i=1,o=arguments.length;i<o;i++)for(var a in r=arguments[i])Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);return t},a.apply(this,arguments)};function __rest(t,r){var i={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&r.indexOf(o)<0&&(i[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(t);a<o.length;a++)r.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(t,o[a])&&(i[o[a]]=t[o[a]])}return i}function __decorate(t,r,i,o){var a,u=arguments.length,c=u<3?r:null===o?o=Object.getOwnPropertyDescriptor(r,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,r,i,o);else for(var l=t.length-1;l>=0;l--)(a=t[l])&&(c=(u<3?a(c):u>3?a(r,i,c):a(r,i))||c);return u>3&&c&&Object.defineProperty(r,i,c),c}function __param(t,r){return function(i,o){r(i,o,t)}}function __metadata(t,r){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,r)}function __awaiter(t,r,i,o){return new(i||(i=Promise))((function(a,u){function fulfilled(t){try{step(o.next(t))}catch(r){u(r)}}function rejected(t){try{step(o.throw(t))}catch(r){u(r)}}function step(t){t.done?a(t.value):function adopt(t){return t instanceof i?t:new i((function(r){r(t)}))}(t.value).then(fulfilled,rejected)}step((o=o.apply(t,r||[])).next())}))}function __generator(t,r){var i,o,a,u,c={label:0,sent:function sent(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return u={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(u[Symbol.iterator]=function(){return this}),u;function verb(u){return function(l){return function step(u){if(i)throw new TypeError("Generator is already executing.");for(;c;)try{if(i=1,o&&(a=2&u[0]?o.return:u[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,u[1])).done)return a;switch(o=0,a&&(u=[2&u[0],a.value]),u[0]){case 0:case 1:a=u;break;case 4:return c.label++,{value:u[1],done:!1};case 5:c.label++,o=u[1],u=[0];continue;case 7:u=c.ops.pop(),c.trys.pop();continue;default:if(!(a=c.trys,(a=a.length>0&&a[a.length-1])||6!==u[0]&&2!==u[0])){c=0;continue}if(3===u[0]&&(!a||u[1]>a[0]&&u[1]<a[3])){c.label=u[1];break}if(6===u[0]&&c.label<a[1]){c.label=a[1],a=u;break}if(a&&c.label<a[2]){c.label=a[2],c.ops.push(u);break}a[2]&&c.ops.pop(),c.trys.pop();continue}u=r.call(t,c)}catch(l){u=[6,l],o=0}finally{i=a=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}([u,l])}}}var u=Object.create?function(t,r,i,o){void 0===o&&(o=i),Object.defineProperty(t,o,{enumerable:!0,get:function get(){return r[i]}})}:function(t,r,i,o){void 0===o&&(o=i),t[o]=r[i]};function __exportStar(t,r){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(r,i)||u(r,t,i)}function __values(t){var r="function"==typeof Symbol&&Symbol.iterator,i=r&&t[r],o=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function next(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(t,r){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,a,u=i.call(t),c=[];try{for(;(void 0===r||r-- >0)&&!(o=u.next()).done;)c.push(o.value)}catch(l){a={error:l}}finally{try{o&&!o.done&&(i=u.return)&&i.call(u)}finally{if(a)throw a.error}}return c}function __spread(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(__read(arguments[r]));return t}function __spreadArrays(){for(var t=0,r=0,i=arguments.length;r<i;r++)t+=arguments[r].length;var o=Array(t),a=0;for(r=0;r<i;r++)for(var u=arguments[r],c=0,l=u.length;c<l;c++,a++)o[a]=u[c];return o}function __spreadArray(t,r,i){if(i||2===arguments.length)for(var o,a=0,u=r.length;a<u;a++)!o&&a in r||(o||(o=Array.prototype.slice.call(r,0,a)),o[a]=r[a]);return t.concat(o||Array.prototype.slice.call(r))}function __await(t){return this instanceof __await?(this.v=t,this):new __await(t)}function __asyncGenerator(t,r,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,a=i.apply(t,r||[]),u=[];return o={},verb("next"),verb("throw"),verb("return"),o[Symbol.asyncIterator]=function(){return this},o;function verb(t){a[t]&&(o[t]=function(r){return new Promise((function(i,o){u.push([t,r,i,o])>1||resume(t,r)}))})}function resume(t,r){try{!function step(t){t.value instanceof __await?Promise.resolve(t.value.v).then(fulfill,reject):settle(u[0][2],t)}(a[t](r))}catch(i){settle(u[0][3],i)}}function fulfill(t){resume("next",t)}function reject(t){resume("throw",t)}function settle(t,r){t(r),u.shift(),u.length&&resume(u[0][0],u[0][1])}}function __asyncDelegator(t){var r,i;return r={},verb("next"),verb("throw",(function(t){throw t})),verb("return"),r[Symbol.iterator]=function(){return this},r;function verb(o,a){r[o]=t[o]?function(r){return(i=!i)?{value:__await(t[o](r)),done:"return"===o}:a?a(r):r}:a}}function __asyncValues(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=t[Symbol.asyncIterator];return i?i.call(t):(t=__values(t),r={},verb("next"),verb("throw"),verb("return"),r[Symbol.asyncIterator]=function(){return this},r);function verb(i){r[i]=t[i]&&function(r){return new Promise((function(o,a){(function settle(t,r,i,o){Promise.resolve(o).then((function(r){t({value:r,done:i})}),r)})(o,a,(r=t[i](r)).done,r.value)}))}}}function __makeTemplateObject(t,r){return Object.defineProperty?Object.defineProperty(t,"raw",{value:r}):t.raw=r,t}var c=Object.create?function(t,r){Object.defineProperty(t,"default",{enumerable:!0,value:r})}:function(t,r){t.default=r};function __importStar(t){if(t&&t.__esModule)return t;var r={};if(null!=t)for(var i in t)"default"!==i&&Object.prototype.hasOwnProperty.call(t,i)&&u(r,t,i);return c(r,t),r}function __importDefault(t){return t&&t.__esModule?t:{default:t}}function __classPrivateFieldGet(t,r,i,o){if("a"===i&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof r?t!==r||!o:!r.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?o:"a"===i?o.call(t):o?o.value:r.get(t)}function __classPrivateFieldSet(t,r,i,o,a){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof r?t!==r||!a:!r.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?a.call(t,i):a?a.value=i:r.set(t,i),i}},34919:function(t,r){"use strict";r.byteLength=function byteLength(t){var r=getLens(t),i=r[0],o=r[1];return 3*(i+o)/4-o},r.toByteArray=function toByteArray(t){var r,i,u=getLens(t),c=u[0],l=u[1],h=new a(function _byteLength(t,r,i){return 3*(r+i)/4-i}(0,c,l)),p=0,d=l>0?c-4:c;for(i=0;i<d;i+=4)r=o[t.charCodeAt(i)]<<18|o[t.charCodeAt(i+1)]<<12|o[t.charCodeAt(i+2)]<<6|o[t.charCodeAt(i+3)],h[p++]=r>>16&255,h[p++]=r>>8&255,h[p++]=255&r;2===l&&(r=o[t.charCodeAt(i)]<<2|o[t.charCodeAt(i+1)]>>4,h[p++]=255&r);1===l&&(r=o[t.charCodeAt(i)]<<10|o[t.charCodeAt(i+1)]<<4|o[t.charCodeAt(i+2)]>>2,h[p++]=r>>8&255,h[p++]=255&r);return h},r.fromByteArray=function fromByteArray(t){for(var r,o=t.length,a=o%3,u=[],c=16383,l=0,h=o-a;l<h;l+=c)u.push(encodeChunk(t,l,l+c>h?h:l+c));1===a?(r=t[o-1],u.push(i[r>>2]+i[r<<4&63]+"==")):2===a&&(r=(t[o-2]<<8)+t[o-1],u.push(i[r>>10]+i[r>>4&63]+i[r<<2&63]+"="));return u.join("")};for(var i=[],o=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=0,l=u.length;c<l;++c)i[c]=u[c],o[u.charCodeAt(c)]=c;function getLens(t){var r=t.length;if(r%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");return-1===i&&(i=r),[i,i===r?0:4-i%4]}function encodeChunk(t,r,o){for(var a,u,c=[],l=r;l<o;l+=3)a=(t[l]<<16&16711680)+(t[l+1]<<8&65280)+(255&t[l+2]),c.push(i[(u=a)>>18&63]+i[u>>12&63]+i[u>>6&63]+i[63&u]);return c.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},31734:function(t,r,i){!function(t,r){"use strict";function assert(t,r){if(!t)throw new Error(r||"Assertion failed")}function inherits(t,r){t.super_=r;var i=function TempCtor(){};i.prototype=r.prototype,t.prototype=new i,t.prototype.constructor=t}function BN(t,r,i){if(BN.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==r&&"be"!==r||(i=r,r=10),this._init(t||0,r||10,i||"be"))}var o;"object"==typeof t?t.exports=BN:r.BN=BN,BN.BN=BN,BN.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:i(46601).Buffer}catch(p){}function parseHex4Bits(t,r){var i=t.charCodeAt(r);return i>=48&&i<=57?i-48:i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:void assert(!1,"Invalid character in "+t)}function parseHexByte(t,r,i){var o=parseHex4Bits(t,i);return i-1>=r&&(o|=parseHex4Bits(t,i-1)<<4),o}function parseBase(t,r,i,o){for(var a=0,u=0,c=Math.min(t.length,i),l=r;l<c;l++){var h=t.charCodeAt(l)-48;a*=o,u=h>=49?h-49+10:h>=17?h-17+10:h,assert(h>=0&&u<o,"Invalid character"),a+=u}return a}function move(t,r){t.words=r.words,t.length=r.length,t.negative=r.negative,t.red=r.red}if(BN.isBN=function isBN(t){return t instanceof BN||null!==t&&"object"==typeof t&&t.constructor.wordSize===BN.wordSize&&Array.isArray(t.words)},BN.max=function max(t,r){return t.cmp(r)>0?t:r},BN.min=function min(t,r){return t.cmp(r)<0?t:r},BN.prototype._init=function init(t,r,i){if("number"==typeof t)return this._initNumber(t,r,i);if("object"==typeof t)return this._initArray(t,r,i);"hex"===r&&(r=16),assert(r===(0|r)&&r>=2&&r<=36);var o=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(o++,this.negative=1),o<t.length&&(16===r?this._parseHex(t,o,i):(this._parseBase(t,r,o),"le"===i&&this._initArray(this.toArray(),r,i)))},BN.prototype._initNumber=function _initNumber(t,r,i){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(assert(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),r,i)},BN.prototype._initArray=function _initArray(t,r,i){if(assert("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var a,u,c=0;if("be"===i)for(o=t.length-1,a=0;o>=0;o-=3)u=t[o]|t[o-1]<<8|t[o-2]<<16,this.words[a]|=u<<c&67108863,this.words[a+1]=u>>>26-c&67108863,(c+=24)>=26&&(c-=26,a++);else if("le"===i)for(o=0,a=0;o<t.length;o+=3)u=t[o]|t[o+1]<<8|t[o+2]<<16,this.words[a]|=u<<c&67108863,this.words[a+1]=u>>>26-c&67108863,(c+=24)>=26&&(c-=26,a++);return this._strip()},BN.prototype._parseHex=function _parseHex(t,r,i){this.length=Math.ceil((t.length-r)/6),this.words=new Array(this.length);for(var o=0;o<this.length;o++)this.words[o]=0;var a,u=0,c=0;if("be"===i)for(o=t.length-1;o>=r;o-=2)a=parseHexByte(t,r,o)<<u,this.words[c]|=67108863&a,u>=18?(u-=18,c+=1,this.words[c]|=a>>>26):u+=8;else for(o=(t.length-r)%2==0?r+1:r;o<t.length;o+=2)a=parseHexByte(t,r,o)<<u,this.words[c]|=67108863&a,u>=18?(u-=18,c+=1,this.words[c]|=a>>>26):u+=8;this._strip()},BN.prototype._parseBase=function _parseBase(t,r,i){this.words=[0],this.length=1;for(var o=0,a=1;a<=67108863;a*=r)o++;o--,a=a/r|0;for(var u=t.length-i,c=u%o,l=Math.min(u,u-c)+i,h=0,p=i;p<l;p+=o)h=parseBase(t,p,p+o,r),this.imuln(a),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(0!==c){var d=1;for(h=parseBase(t,p,t.length,r),p=0;p<c;p++)d*=r;this.imuln(d),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}this._strip()},BN.prototype.copy=function copy(t){t.words=new Array(this.length);for(var r=0;r<this.length;r++)t.words[r]=this.words[r];t.length=this.length,t.negative=this.negative,t.red=this.red},BN.prototype._move=function _move(t){move(t,this)},BN.prototype.clone=function clone(){var t=new BN(null);return this.copy(t),t},BN.prototype._expand=function _expand(t){for(;this.length<t;)this.words[this.length++]=0;return this},BN.prototype._strip=function strip(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},BN.prototype._normSign=function _normSign(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{BN.prototype[Symbol.for("nodejs.util.inspect.custom")]=inspect}catch(p){BN.prototype.inspect=inspect}else BN.prototype.inspect=inspect;function inspect(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var a=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],u=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],c=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];BN.prototype.toString=function toString(t,r){var i;if(r=0|r||1,16===(t=t||10)||"hex"===t){i="";for(var o=0,l=0,h=0;h<this.length;h++){var p=this.words[h],d=(16777215&(p<<o|l)).toString(16);i=0!==(l=p>>>24-o&16777215)||h!==this.length-1?a[6-d.length]+d+i:d+i,(o+=2)>=26&&(o-=26,h--)}for(0!==l&&(i=l.toString(16)+i);i.length%r!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(t===(0|t)&&t>=2&&t<=36){var y=u[t],b=c[t];i="";var v=this.clone();for(v.negative=0;!v.isZero();){var g=v.modrn(b).toString(t);i=(v=v.idivn(b)).isZero()?g+i:a[y-g.length]+g+i}for(this.isZero()&&(i="0"+i);i.length%r!=0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}assert(!1,"Base should be between 2 and 36")},BN.prototype.toNumber=function toNumber(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&assert(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},BN.prototype.toJSON=function toJSON(){return this.toString(16,2)},o&&(BN.prototype.toBuffer=function toBuffer(t,r){return this.toArrayLike(o,t,r)}),BN.prototype.toArray=function toArray(t,r){return this.toArrayLike(Array,t,r)};function smallMulTo(t,r,i){i.negative=r.negative^t.negative;var o=t.length+r.length|0;i.length=o,o=o-1|0;var a=0|t.words[0],u=0|r.words[0],c=a*u,l=67108863&c,h=c/67108864|0;i.words[0]=l;for(var p=1;p<o;p++){for(var d=h>>>26,y=67108863&h,b=Math.min(p,r.length-1),v=Math.max(0,p-t.length+1);v<=b;v++){var g=p-v|0;d+=(c=(a=0|t.words[g])*(u=0|r.words[v])+y)/67108864|0,y=67108863&c}i.words[p]=0|y,h=0|d}return 0!==h?i.words[p]=0|h:i.length--,i._strip()}BN.prototype.toArrayLike=function toArrayLike(t,r,i){this._strip();var o=this.byteLength(),a=i||Math.max(1,o);assert(o<=a,"byte array longer than desired len